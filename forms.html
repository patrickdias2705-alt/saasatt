<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <link rel="icon" type="image/png" href="https://imagens-zipline.hgabnb.easypanel.host/u/2FsJTY.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0">
    <meta name="theme-color" content="#0a0420">
    <title>Onboarding | SalesDever</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #A594FF;
            --primary-light: #C4B8FF;
            --primary-dark: #7B68EE;
            --accent: #667eea;
            --bg-dark: #0a0420;
            --bg-card: rgba(255, 255, 255, 0.04);
            --border-color: rgba(165, 148, 255, 0.2);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.75);
            --text-muted: rgba(255, 255, 255, 0.5);
            --success: #22c55e;
            --error: #ff6b6b;
            --gradient-primary: linear-gradient(135deg, #A594FF 0%, #667eea 100%);
            --gradient-glow: linear-gradient(135deg, rgba(165, 148, 255, 0.15), rgba(102, 126, 234, 0.1));
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; -webkit-tap-highlight-color: rgba(165, 148, 255, 0.2); }
        
        body {
            font-family: 'Outfit', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-dark);
            min-height: 100vh;
            color: var(--text-primary);
            padding-top: 80px;
            padding-bottom: 60px;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
        }

        /* EPIC CANVAS EFFECTS */
        #confetti-canvas, #fireworks-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        /* CELEBRATION OVERLAY */
        .celebration-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at center, rgba(165, 148, 255, 0.3) 0%, transparent 70%);
            pointer-events: none;
            z-index: 9997;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        .celebration-overlay.active {
            opacity: 1;
            animation: celebrationPulse 2s ease-in-out;
        }
        @keyframes celebrationPulse {
            0%, 100% { opacity: 0; }
            50% { opacity: 1; }
        }

        /* EPIC TEXT */
        .epic-celebration-text {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: clamp(2rem, 8vw, 5rem);
            font-weight: 900;
            background: linear-gradient(135deg, #A594FF, #667eea, #22c55e, #ff6b6b, #A594FF);
            background-size: 400% 400%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            z-index: 10000;
            opacity: 0;
            pointer-events: none;
            text-align: center;
            white-space: nowrap;
        }
        .epic-celebration-text.active {
            animation: epicTextReveal 3s cubic-bezier(0.34, 1.56, 0.64, 1) forwards, gradientFlow 2s ease infinite;
        }
        @keyframes epicTextReveal {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.3) rotate(-10deg); filter: blur(20px); }
            50% { opacity: 1; transform: translate(-50%, -50%) scale(1.2) rotate(5deg); filter: blur(0); }
            70% { transform: translate(-50%, -50%) scale(1) rotate(0deg); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1.5); filter: blur(10px); }
        }
        @keyframes gradientFlow {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* FLOATING PARTICLES */
        .particles-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
            overflow: hidden;
        }
        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: var(--primary);
            border-radius: 50%;
            opacity: 0.3;
            animation: floatParticle 15s infinite ease-in-out;
        }
        @keyframes floatParticle {
            0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
            10% { opacity: 0.5; }
            90% { opacity: 0.5; }
            100% { transform: translateY(-100px) rotate(720deg); opacity: 0; }
        }

        /* SPARKLE EFFECT */
        .sparkle {
            position: fixed;
            width: 10px;
            height: 10px;
            background: white;
            border-radius: 50%;
            pointer-events: none;
            animation: sparkle 0.8s ease-out forwards;
            z-index: 9998;
        }
        @keyframes sparkle {
            0% { transform: scale(0) rotate(0deg); opacity: 1; }
            100% { transform: scale(2) rotate(180deg); opacity: 0; }
        }

        /* SHAKE ANIMATION */
        .shake { animation: shake 0.5s cubic-bezier(0.36, 0.07, 0.19, 0.97); }
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* PULSE GLOW */
        .pulse-glow { animation: pulseGlow 2s ease-in-out infinite; }
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 20px rgba(165, 148, 255, 0.3); }
            50% { box-shadow: 0 0 40px rgba(165, 148, 255, 0.6), 0 0 60px rgba(165, 148, 255, 0.4); }
        }

        /* FLOAT ANIMATION */
        .float-animation { animation: floatIcon 3s ease-in-out infinite; }
        @keyframes floatIcon {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* RAINBOW BORDER */
        .rainbow-border { position: relative; }
        .rainbow-border::before {
            content: '';
            position: absolute;
            top: -2px; left: -2px; right: -2px; bottom: -2px;
            background: linear-gradient(45deg, #ff0000, #ff7300, #fffb00, #48ff00, #00ffd5, #002bff, #7a00ff, #ff00c8, #ff0000);
            background-size: 400%;
            border-radius: 26px;
            z-index: -1;
            animation: rainbowBorder 20s linear infinite;
            filter: blur(5px);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .rainbow-border:hover::before { opacity: 0.7; }
        @keyframes rainbowBorder {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* STEP COMPLETION */
        .step-indicator.completing { animation: stepComplete 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }
        @keyframes stepComplete {
            0% { transform: scale(1); }
            50% { transform: scale(1.5); background: var(--success); box-shadow: 0 0 30px var(--success); }
            100% { transform: scale(1); }
        }

        /* AURORA EFFECT */
        .aurora {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0.3;
        }
        .aurora::before, .aurora::after {
            content: '';
            position: absolute;
            width: 150%; height: 150%;
            top: -25%; left: -25%;
        }
        .aurora::before {
            background: linear-gradient(180deg, transparent 0%, rgba(165, 148, 255, 0.1) 30%, rgba(102, 126, 234, 0.15) 50%, transparent 100%);
            animation: aurora1 10s ease-in-out infinite;
        }
        .aurora::after {
            background: linear-gradient(180deg, transparent 0%, rgba(34, 197, 94, 0.08) 40%, rgba(165, 148, 255, 0.1) 60%, transparent 100%);
            animation: aurora2 12s ease-in-out infinite;
        }
        @keyframes aurora1 {
            0%, 100% { transform: rotate(0deg) translateY(0); }
            50% { transform: rotate(10deg) translateY(-50px); }
        }
        @keyframes aurora2 {
            0%, 100% { transform: rotate(0deg) translateY(0); }
            50% { transform: rotate(-10deg) translateY(-30px); }
        }

        /* MORPHING BACKGROUND */
        .morphing-bg {
            position: fixed;
            top: 50%; left: 50%;
            width: 600px; height: 600px;
            transform: translate(-50%, -50%);
            background: linear-gradient(45deg, rgba(165, 148, 255, 0.1), rgba(102, 126, 234, 0.1));
            border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%;
            animation: morphing 15s ease-in-out infinite;
            z-index: 0;
            pointer-events: none;
            filter: blur(60px);
        }
        @keyframes morphing {
            0%, 100% { border-radius: 60% 40% 30% 70% / 60% 30% 70% 40%; }
            25% { border-radius: 30% 60% 70% 40% / 50% 60% 30% 60%; }
            50% { border-radius: 50% 60% 30% 60% / 30% 60% 70% 40%; }
            75% { border-radius: 60% 40% 60% 30% / 70% 30% 50% 60%; }
        }

        /* ANIMATED BACKGROUND */
        .bg-animation {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .bg-animation::before {
            content: '';
            position: absolute;
            top: -50%; left: -50%;
            width: 200%; height: 200%;
            background: 
                radial-gradient(ellipse at 20% 20%, rgba(165, 148, 255, 0.12) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, rgba(102, 126, 234, 0.08) 0%, transparent 50%),
                radial-gradient(ellipse at 50% 50%, rgba(123, 104, 238, 0.05) 0%, transparent 70%);
            animation: bgFloat 25s ease-in-out infinite;
        }
        @keyframes bgFloat {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            33% { transform: translate(2%, 2%) rotate(1deg); }
            66% { transform: translate(-1%, 1%) rotate(-1deg); }
        }

        /* ORBS */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            z-index: 0;
        }
        .orb-1 {
            width: 400px; height: 400px;
            background: rgba(165, 148, 255, 0.15);
            top: 10%; left: -10%;
            animation: orbFloat1 20s ease-in-out infinite;
        }
        .orb-2 {
            width: 300px; height: 300px;
            background: rgba(102, 126, 234, 0.12);
            bottom: 10%; right: -5%;
            animation: orbFloat2 25s ease-in-out infinite;
        }
        .orb-3 {
            width: 200px; height: 200px;
            background: rgba(123, 104, 238, 0.1);
            top: 50%; left: 50%;
            animation: orbFloat3 30s ease-in-out infinite;
        }
        @keyframes orbFloat1 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(50px, 30px) scale(1.1); }
        }
        @keyframes orbFloat2 {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(-40px, -50px) scale(1.15); }
        }
        @keyframes orbFloat3 {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-40%, -60%) scale(1.2); }
        }
        /* PROGRESS BAR */
        .progress-container {
            position: fixed;
            top: 0; left: 0;
            width: 100%;
            height: 70px;
            background: linear-gradient(180deg, rgba(10, 4, 32, 0.98) 0%, rgba(10, 4, 32, 0.95) 100%);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-color);
            z-index: 1000;
            display: flex;
            align-items: center;
            padding: 0 30px;
            gap: 20px;
        }
        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 1.1rem;
            color: var(--text-primary);
        }
        .logo img {
            height: 32px;
            width: auto;
            animation: logoFloat 3s ease-in-out infinite;
        }
        @keyframes logoFloat {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }
        .progress-wrapper {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .progress-steps {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }
        .step-indicator {
            flex: 1;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }
        .step-indicator::after {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.4), transparent);
        }
        .step-indicator.active {
            background: var(--gradient-primary);
            box-shadow: 0 0 15px rgba(165, 148, 255, 0.6);
            transform: scaleY(1.5);
        }
        .step-indicator.active::after { animation: shimmerStep 2s infinite; }
        @keyframes shimmerStep {
            0% { left: -100%; }
            100% { left: 100%; }
        }
        .step-indicator.completed {
            background: var(--success);
            box-shadow: 0 0 10px rgba(34, 197, 94, 0.5);
        }
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .step-name {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--primary-light);
        }
        .step-count {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-weight: 500;
        }

        /* CONTAINER */
        .container {
            max-width: 720px;
            margin: 0 auto;
            padding: 0 20px;
            position: relative;
            z-index: 1;
        }
        .container.expanded { max-width: 1100px; }

        /* FORM SECTIONS */
        .form-section, .form-step {
            display: none;
            animation: slideIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .form-section.active, .form-step.active { display: block; }
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(50px) scale(0.95); filter: blur(5px); }
            to { opacity: 1; transform: translateY(0) scale(1); filter: blur(0); }
        }

        /* CARD */
        .card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 40px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3), 0 0 60px rgba(165, 148, 255, 0.05);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            overflow: hidden;
        }
        .card::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(165, 148, 255, 0.05), transparent);
            transition: left 0.8s ease;
        }
        .card:hover {
            border-color: rgba(165, 148, 255, 0.4);
            box-shadow: 0 8px 50px rgba(0, 0, 0, 0.4), 0 0 100px rgba(165, 148, 255, 0.1);
            transform: translateY(-5px);
        }
        .card:hover::before { left: 100%; }

        /* SECTION HEADER */
        .section-header {
            text-align: center;
            margin-bottom: 40px;
        }
        .section-icon {
            width: 70px; height: 70px;
            background: var(--gradient-glow);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: var(--primary-light);
            transition: all 0.3s ease;
        }
        .section-icon:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 0 30px rgba(165, 148, 255, 0.5);
        }
        .section-icon svg { width: 32px; height: 32px; stroke: currentColor; fill: none; stroke-width: 1.5; }
        .section-header h2 {
            font-size: 1.8rem;
            font-weight: 800;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ffffff 0%, var(--primary-light) 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .section-header p {
            font-size: 1rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* FORM GROUPS */
        .form-group { margin-bottom: 28px; position: relative; }
        .form-group:last-of-type { margin-bottom: 0; }
        .form-group label {
            display: block;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
            transition: color 0.3s ease;
        }
        .form-group:focus-within label { color: var(--primary-light); }
        .required { color: var(--error); margin-left: 3px; }
        .hint {
            font-size: 0.85rem;
            color: var(--text-muted);
            margin-bottom: 10px;
            font-style: italic;
        }

        /* INPUTS */
        input[type="text"], input[type="email"], input[type="tel"], input[type="number"], input[type="password"], textarea {
            width: 100%;
            padding: 16px 20px;
            font-size: 0.95rem;
            font-family: 'Outfit', sans-serif;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            color: var(--text-primary);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 4px rgba(165, 148, 255, 0.15), 0 0 30px rgba(165, 148, 255, 0.1);
            transform: translateY(-2px);
        }
        input::placeholder, textarea::placeholder { color: var(--text-muted); }
        textarea { min-height: 120px; resize: vertical; line-height: 1.6; }

        /* OPTION GROUPS */
        .option-group {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 10px;
        }
        .option-item {
            display: flex;
            align-items: flex-start;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            gap: 14px;
            position: relative;
            overflow: hidden;
        }
        .option-item::before {
            content: '';
            position: absolute;
            top: 50%; left: 50%;
            width: 0; height: 0;
            background: rgba(165, 148, 255, 0.1);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: all 0.5s ease;
        }
        .option-item:hover {
            background: rgba(165, 148, 255, 0.08);
            border-color: rgba(165, 148, 255, 0.4);
            transform: translateX(8px) scale(1.02);
        }
        .option-item:hover::before { width: 300px; height: 300px; }
        .option-item.selected {
            background: rgba(165, 148, 255, 0.15);
            border-color: var(--primary);
            box-shadow: 0 0 20px rgba(165, 148, 255, 0.2);
        }
        .option-item.selected::after {
            content: '✓';
            position: absolute;
            top: 10px; right: 15px;
            color: var(--primary);
            font-weight: bold;
            animation: checkAppear 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        @keyframes checkAppear {
            from { transform: scale(0) rotate(-180deg); }
            to { transform: scale(1) rotate(0deg); }
        }
        .option-item input[type="radio"], .option-item input[type="checkbox"] {
            width: 20px; height: 20px;
            margin-top: 2px;
            accent-color: var(--primary);
            cursor: pointer;
        }
        .option-content { flex: 1; position: relative; z-index: 1; }
        .option-content label {
            font-size: 0.95rem;
            font-weight: 500;
            color: var(--text-primary);
            cursor: pointer;
            margin-bottom: 0;
        }
        .option-content .sub-input {
            margin-top: 12px;
            display: none;
            animation: subInputAppear 0.3s ease;
        }
        @keyframes subInputAppear {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .option-item.selected .sub-input { display: block; }
        .sub-input input { padding: 12px 16px; font-size: 0.9rem; }

        /* CHECKBOX GRID */
        .checkbox-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }
        .checkbox-item {
            display: flex;
            align-items: center;
            padding: 14px 18px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            gap: 12px;
        }
        .checkbox-item:hover {
            background: rgba(165, 148, 255, 0.08);
            border-color: rgba(165, 148, 255, 0.4);
            transform: scale(1.03);
        }
        .checkbox-item.selected {
            background: rgba(165, 148, 255, 0.12);
            border-color: var(--primary);
        }
        .checkbox-item input[type="checkbox"] { width: 18px; height: 18px; accent-color: var(--primary); }
        .checkbox-item label { font-size: 0.9rem; font-weight: 500; cursor: pointer; margin-bottom: 0; }
        /* FILE UPLOAD */
        .file-upload-area {
            border: 2px dashed var(--border-color);
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            background: rgba(255, 255, 255, 0.02);
            margin-top: 10px;
            position: relative;
            overflow: hidden;
        }
        .file-upload-area:hover {
            border-color: var(--primary);
            background: rgba(165, 148, 255, 0.05);
            transform: scale(1.02);
        }
        .file-upload-area.dragover {
            border-color: var(--primary);
            background: rgba(165, 148, 255, 0.15);
            transform: scale(1.03);
        }
        .file-upload-area input[type="file"] { display: none; }
        .upload-icon { width: 48px; height: 48px; margin: 0 auto 12px; color: var(--primary-light); display: block; }
        .upload-icon svg { width: 48px; height: 48px; stroke: currentColor; fill: none; stroke-width: 1.5; }
        .upload-text { font-size: 0.95rem; font-weight: 600; color: var(--primary-light); margin-bottom: 8px; }
        .upload-hint { font-size: 0.8rem; color: var(--text-muted); }
        .uploaded-files-list { margin-top: 16px; display: flex; flex-direction: column; gap: 10px; }
        .uploaded-file-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(165, 148, 255, 0.1);
            border: 1px solid rgba(165, 148, 255, 0.25);
            border-radius: 10px;
            animation: fileAppear 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        @keyframes fileAppear {
            from { opacity: 0; transform: translateX(-20px) scale(0.9); }
            to { opacity: 1; transform: translateX(0) scale(1); }
        }
        .uploaded-file-item .file-name { font-size: 0.88rem; color: var(--text-primary); font-weight: 500; display: flex; align-items: center; gap: 8px; }
        .uploaded-file-item .file-name svg { width: 18px; height: 18px; color: var(--primary-light); stroke: currentColor; fill: none; }
        .remove-file-btn {
            background: rgba(255, 107, 107, 0.2);
            color: var(--error);
            border: none;
            padding: 6px 14px;
            border-radius: 8px;
            font-size: 0.8rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .remove-file-btn:hover { background: var(--error); color: white; transform: scale(1.05); }

        /* NAVIGATION */
        .navigation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 40px;
            padding-top: 30px;
            border-top: 1px solid var(--border-color);
            gap: 16px;
        }
        .btn {
            padding: 14px 32px;
            font-size: 0.95rem;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            display: flex;
            align-items: center;
            gap: 10px;
            position: relative;
            overflow: hidden;
        }
        .btn svg { width: 18px; height: 18px; transition: transform 0.3s ease; stroke: currentColor; fill: none; }
        .btn-back {
            background: rgba(255, 255, 255, 0.08);
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }
        .btn-back:hover {
            background: rgba(255, 255, 255, 0.12);
            color: var(--text-primary);
            transform: translateX(-4px);
        }
        .btn-back:hover svg { transform: translateX(-4px); }
        .btn-next, .btn-submit {
            background: var(--gradient-primary);
            color: white;
            box-shadow: 0 4px 20px rgba(165, 148, 255, 0.4);
        }
        .btn-next:hover, .btn-submit:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 10px 40px rgba(165, 148, 255, 0.5);
        }
        .btn-next:hover svg, .btn-submit:hover svg { transform: translateX(4px); }
        .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; }

        /* ERROR STATE */
        .form-group.error input, .form-group.error textarea {
            border-color: var(--error);
            background: rgba(255, 107, 107, 0.05);
        }
        .error-message { color: var(--error); font-size: 0.85rem; margin-top: 8px; display: none; font-weight: 500; }
        .form-group.error .error-message {
            display: block;
            animation: errorAppear 0.3s ease;
        }
        @keyframes errorAppear {
            from { opacity: 0; transform: translateY(-5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* WELCOME SECTION */
        .welcome-card { text-align: center; padding: 60px 40px; margin-top: 40px; position: relative; overflow: visible; }
        
        /* ========== NEW INTRO SCREEN ========== */
        .onboarding-intro {
            position: relative;
            min-height: 75vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }
        .intro-content {
            max-width: 800px;
            text-align: center;
            position: relative;
            z-index: 1;
        }
        .intro-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(165, 148, 255, 0.1);
            border: 1px solid rgba(165, 148, 255, 0.3);
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary-light);
            margin-bottom: 32px;
        }
        .intro-badge svg {
            stroke: currentColor;
            fill: none;
            animation: starPulse 2s ease-in-out infinite;
        }
        .animate-pop {
            animation: popIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) both;
        }
        .animate-slide {
            animation: slideUp 0.8s cubic-bezier(0.22, 1, 0.36, 1) 0.2s both;
        }
        .animate-fade {
            animation: fadeIn 0.8s ease 0.4s both;
        }
        .animate-scale {
            animation: scaleIn 0.8s cubic-bezier(0.22, 1, 0.36, 1) 0.6s both;
        }
        @keyframes popIn {
            0% { opacity: 0; transform: scale(0.8); }
            100% { opacity: 1; transform: scale(1); }
        }
        @keyframes slideUp {
            0% { opacity: 0; transform: translateY(40px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        @keyframes fadeIn {
            0% { opacity: 0; }
            100% { opacity: 1; }
        }
        @keyframes scaleIn {
            0% { opacity: 0; transform: scale(0.9); }
            100% { opacity: 1; transform: scale(1); }
        }
        .intro-title {
            font-size: clamp(2rem, 5vw, 3rem);
            font-weight: 900;
            line-height: 1.2;
            color: var(--text-primary);
            margin-bottom: 20px;
        }
        .text-gradient {
            background: linear-gradient(135deg, #a594ff 0%, #8b5cf6 50%, #c084fc 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: shineGradient 3s linear infinite;
        }
        @keyframes shineGradient {
            to { background-position: 200% center; }
        }
        .intro-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            line-height: 1.8;
            margin-bottom: 45px;
        }
        .intro-subtitle strong {
            color: var(--primary-light);
            font-weight: 600;
        }
        
        /* ========== EPIC STEPS - DESIGN MÁGICO ========== */
        .epic-steps-container {
            position: relative;
            width: 100%;
            max-width: 900px;
            height: 380px;
            margin: 0 auto 40px;
        }
        
        /* SVG da linha curva */
        .curved-path-svg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
            overflow: visible;
        }
        
        /* Linha de fundo (glow) */
        .glow-curve-path {
            fill: none;
            stroke: rgba(165, 148, 255, 0.3);
            stroke-width: 20;
            stroke-linecap: round;
            filter: blur(15px);
            stroke-dasharray: 1200;
            stroke-dashoffset: 1200;
            animation: drawLineGlow 2.5s ease-out 0.3s forwards;
        }
        
        /* Linha principal grossa */
        .main-curve-path {
            fill: none;
            stroke: url(#curveGradient);
            stroke-width: 5;
            stroke-linecap: round;
            stroke-dasharray: 1200;
            stroke-dashoffset: 1200;
            animation: drawLine 2.5s ease-out 0.3s forwards;
        }
        
        @keyframes drawLine {
            to { stroke-dashoffset: 0; }
        }
        @keyframes drawLineGlow {
            to { stroke-dashoffset: 0; }
        }
        
        /* Bolinha viajando */
        .traveling-dot {
            opacity: 0;
            animation: showDot 0.5s ease 2.8s forwards;
        }
        
        @keyframes showDot {
            to { opacity: 1; }
        }
        
        /* Animação da bolinha */
        @keyframes moveDot {
            0%, 100% { offset-distance: 0%; }
            50% { offset-distance: 100%; }
        }
        
        /* Step container */
        .epic-step {
            position: absolute;
            display: flex;
            flex-direction: column;
            z-index: 5;
            opacity: 0;
            transform: translateY(40px) scale(0.8);
        }
        
        /* Posições em escada - ajustadas para linha passar pelo centro */
        .epic-step[data-epic="1"] {
            left: 5%;
            top: 58%;
            animation: stepReveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 0.8s forwards;
        }
        .epic-step[data-epic="2"] {
            left: 40%;
            top: 30%;
            animation: stepReveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 1.4s forwards;
        }
        .epic-step[data-epic="3"] {
            left: 75%;
            top: 3%;
            animation: stepReveal 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) 2s forwards;
        }
        
        @keyframes stepReveal {
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        /* Wrapper do conteúdo */
        .step-content-wrapper {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            position: relative;
        }
        
        /* Número grande atrás */
        .step-bg-number {
            position: absolute;
            font-size: 180px;
            font-weight: 900;
            color: rgba(255, 255, 255, 0.04);
            z-index: 0;
            pointer-events: none;
            font-family: 'Outfit', sans-serif;
            line-height: 0.75;
            user-select: none;
            top: -25px;
            left: 50px;
        }
        
        /* Card SÓLIDO com gradiente */
        .step-card-inner {
            position: relative;
            width: 72px;
            height: 72px;
            background: linear-gradient(145deg, 
                rgba(55, 45, 100, 0.95) 0%, 
                rgba(35, 28, 75, 0.98) 100%
            );
            border: 2px solid rgba(165, 148, 255, 0.4);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 
                0 10px 40px rgba(0, 0, 0, 0.4),
                0 0 30px rgba(165, 148, 255, 0.15),
                inset 0 1px 0 rgba(255, 255, 255, 0.1),
                inset 0 -1px 0 rgba(0, 0, 0, 0.2);
            transition: all 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            cursor: pointer;
            z-index: 10;
            margin-bottom: 14px;
        }
        
        /* Brilho animado no card */
        .step-card-inner::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, 
                transparent 30%, 
                rgba(165, 148, 255, 0.4) 50%, 
                transparent 70%
            );
            border-radius: 22px;
            z-index: -1;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .step-card-inner:hover::before {
            opacity: 1;
            animation: shimmer 1.5s ease-in-out infinite;
        }
        
        @keyframes shimmer {
            0% { transform: translateX(-100%) rotate(45deg); }
            100% { transform: translateX(100%) rotate(45deg); }
        }
        
        .step-card-inner:hover {
            transform: scale(1.15) translateY(-8px);
            border-color: rgba(165, 148, 255, 0.7);
            box-shadow: 
                0 20px 60px rgba(0, 0, 0, 0.5),
                0 0 50px rgba(165, 148, 255, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.15);
        }
        
        /* Ícones estilizados */
        .step-svg {
            color: var(--primary-light);
            width: 32px;
            height: 32px;
            filter: drop-shadow(0 2px 10px rgba(165, 148, 255, 0.5));
            transition: all 0.3s ease;
        }
        
        .step-card-inner:hover .step-svg {
            transform: scale(1.1);
            filter: drop-shadow(0 4px 15px rgba(165, 148, 255, 0.7));
        }
        
        /* Animação engrenagem */
        .spinning-icon {
            animation: spinGear 15s linear infinite;
        }
        @keyframes spinGear {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Animação checkmark */
        .check-path {
            stroke-dasharray: 30;
            stroke-dashoffset: 30;
            animation: drawCheck 2s ease-in-out 2.2s forwards, drawCheckLoop 3s ease-in-out 4.2s infinite;
        }
        @keyframes drawCheck {
            to { stroke-dashoffset: 0; }
        }
        @keyframes drawCheckLoop {
            0%, 40% { stroke-dashoffset: 0; }
            50%, 90% { stroke-dashoffset: 30; }
            100% { stroke-dashoffset: 0; }
        }
        
        /* Título */
        .step-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 0;
            white-space: nowrap;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }
        
        /* Esconder elementos não usados */
        .orbit-container, .orbit-dot, .step-glow-ring, .icon-particles, 
        .epic-arrow, .arrow-pulse, .step-badge, .connector-glow,
        .epic-connector, .connector-progress { 
            display: none; 
        }
        
        /* Esconder linha mobile no desktop */
        .mobile-line {
            display: none;
        }
        
        /* Wrapper do card para mobile */
        .step-card-wrapper {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        
        /* ========== RESPONSIVO ========== */
        @media (max-width: 900px) {
            .epic-steps-container {
                height: 340px;
            }
            .step-bg-number {
                font-size: 150px;
            }
            .step-card-inner {
                width: 64px;
                height: 64px;
            }
            .step-svg {
                width: 28px;
                height: 28px;
            }
        }
        
        @media (max-width: 768px) {
            .epic-steps-container {
                height: auto;
                padding: 20px 0;
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 0;
            }
            
            /* Esconder linha curva no mobile */
            .curved-path-svg {
                display: none;
            }
            
            /* Mostrar linha vertical mobile */
            .mobile-line {
                display: block;
                position: absolute;
                left: 50%;
                top: 60px;
                bottom: 60px;
                width: 4px;
                background: linear-gradient(180deg, 
                    var(--primary),
                    rgba(165, 148, 255, 0.6),
                    var(--primary)
                );
                transform: translateX(-50%);
                z-index: 1;
                border-radius: 2px;
                box-shadow: 0 0 20px rgba(165, 148, 255, 0.4);
                transform-origin: top;
                animation: lineGrowVertical 1.5s ease-out 0.3s both;
            }
            
            @keyframes lineGrowVertical {
                from { 
                    transform: translateX(-50%) scaleY(0);
                    opacity: 0;
                }
                to { 
                    transform: translateX(-50%) scaleY(1);
                    opacity: 1;
                }
            }
            
            /* Reset posições */
            .epic-step {
                position: relative;
                left: auto !important;
                top: auto !important;
                width: 100%;
                max-width: 320px;
                padding: 25px 0;
            }
            
            /* Layout horizontal com número ao lado */
            .step-content-wrapper {
                flex-direction: row;
                align-items: center;
                justify-content: center;
                gap: 25px;
                width: 100%;
            }
            
            /* Número ao lado no mobile */
            .step-bg-number {
                position: relative;
                top: auto;
                left: auto;
                font-size: 90px;
                color: rgba(255, 255, 255, 0.06);
                flex-shrink: 0;
                width: 70px;
                text-align: right;
                transform: none;
            }
            
            /* Card e texto juntos */
            .step-card-wrapper {
                display: flex;
                flex-direction: column;
                align-items: center;
            }
            
            .step-card-inner {
                margin-bottom: 12px;
            }
            
            .step-title {
                text-align: center;
                font-size: 1rem;
            }
            
            /* Animações mobile */
            .epic-step[data-epic="1"] {
                animation: stepRevealMobile 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) 0.6s forwards;
            }
            .epic-step[data-epic="2"] {
                animation: stepRevealMobile 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) 1s forwards;
            }
            .epic-step[data-epic="3"] {
                animation: stepRevealMobile 0.7s cubic-bezier(0.34, 1.56, 0.64, 1) 1.4s forwards;
            }
            
            @keyframes stepRevealMobile {
                to {
                    opacity: 1;
                    transform: translateY(0) scale(1);
                }
            }
        }
        
        @media (max-width: 480px) {
            .epic-steps-container {
                padding: 15px 0;
            }
            .epic-step {
                padding: 20px 0;
            }
            .step-card-inner {
                width: 60px;
                height: 60px;
                border-radius: 16px;
            }
            .step-svg {
                width: 28px;
                height: 28px;
            }
            .step-title {
                font-size: 0.95rem;
            }
            .step-bg-number {
                font-size: 70px;
                width: 55px;
            }
            .step-content-wrapper {
                gap: 18px;
            }
        }
        
        /* Botão Start */
        .btn-start-journey {
            display: inline-flex;
            align-items: center;
            gap: 12px;
            padding: 18px 40px;
            background: var(--gradient-primary);
            border: none;
            border-radius: 14px;
            color: white;
            font-size: 1.05rem;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 10px 30px rgba(165, 148, 255, 0.25);
        }
        .btn-start-journey:hover {
            transform: translateY(-4px) scale(1.02);
            box-shadow: 0 20px 40px rgba(165, 148, 255, 0.35);
        }
        .btn-start-journey svg {
            stroke: currentColor;
            fill: none;
            transition: transform 0.3s ease;
        }
        .btn-start-journey:hover svg {
            transform: translateX(5px);
        }
        
        /* ========== RULES SCREEN ========== */
        .onboarding-rules {
            min-height: 75vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }
        .rules-card {
            max-width: 600px;
            width: 100%;
            background: linear-gradient(180deg, rgba(30, 20, 60, 0.95) 0%, rgba(15, 10, 35, 0.98) 100%);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 45px 40px;
            animation: cardSlideUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) both;
        }
        @keyframes cardSlideUp {
            0% { opacity: 0; transform: translateY(30px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .rules-header {
            text-align: center;
            margin-bottom: 35px;
        }
        .rules-icon-wrapper {
            width: 70px;
            height: 70px;
            background: var(--gradient-glow);
            border: 1px solid var(--border-color);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: var(--primary-light);
        }
        .rules-icon-wrapper svg {
            stroke: currentColor;
            fill: none;
        }
        .rules-title {
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        .rules-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }
        .rules-list {
            display: flex;
            flex-direction: column;
            gap: 14px;
            margin-bottom: 28px;
        }
        .rule-item {
            display: flex;
            gap: 16px;
            padding: 18px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            transition: all 0.3s ease;
            animation: ruleSlideIn 0.5s ease both;
        }
        .rule-item:nth-child(1) { animation-delay: 0.1s; }
        .rule-item:nth-child(2) { animation-delay: 0.2s; }
        .rule-item:nth-child(3) { animation-delay: 0.3s; }
        .rule-item:nth-child(4) { animation-delay: 0.4s; }
        @keyframes ruleSlideIn {
            0% { opacity: 0; transform: translateX(-20px); }
            100% { opacity: 1; transform: translateX(0); }
        }
        .rule-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(165, 148, 255, 0.3);
            transform: translateX(5px);
        }
        .rule-icon-svg {
            width: 48px;
            height: 48px;
            background: var(--gradient-glow);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            color: var(--primary-light);
        }
        .rule-icon-svg svg {
            stroke: currentColor;
            fill: none;
        }
        .rule-content h4 {
            font-size: 0.95rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 4px;
        }
        .rule-content p {
            font-size: 0.85rem;
            color: var(--text-secondary);
            line-height: 1.5;
        }
        
        /* Agreement Checkbox */
        .rules-agreement {
            margin-bottom: 24px;
        }
        .agreement-checkbox {
            display: flex;
            align-items: center;
            gap: 14px;
            padding: 16px 18px;
            background: rgba(165, 148, 255, 0.06);
            border: 2px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .agreement-checkbox:hover {
            border-color: rgba(165, 148, 255, 0.4);
            background: rgba(165, 148, 255, 0.1);
        }
        .agreement-checkbox.checked {
            border-color: var(--primary);
            background: rgba(165, 148, 255, 0.12);
        }
        .agreement-checkbox input {
            display: none;
        }
        .checkbox-custom {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-color);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            transition: all 0.3s ease;
            background: transparent;
        }
        .checkbox-custom svg {
            opacity: 0;
            transform: scale(0.5);
            transition: all 0.2s ease;
            stroke: white;
            fill: none;
        }
        .agreement-checkbox.checked .checkbox-custom {
            background: var(--primary);
            border-color: var(--primary);
        }
        .agreement-checkbox.checked .checkbox-custom svg {
            opacity: 1;
            transform: scale(1);
        }
        .checkbox-text {
            font-size: 0.9rem;
            color: var(--text-primary);
            font-weight: 500;
            line-height: 1.4;
        }
        
        /* Continue Button */
        .btn-continue-rules {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 16px 28px;
            background: var(--gradient-primary);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0.5;
        }
        .btn-continue-rules:disabled {
            cursor: not-allowed;
            opacity: 0.5;
        }
        .btn-continue-rules:not(:disabled) {
            opacity: 1;
            box-shadow: 0 8px 25px rgba(165, 148, 255, 0.25);
        }
        .btn-continue-rules:not(:disabled):hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(165, 148, 255, 0.35);
        }
        .btn-continue-rules svg {
            stroke: currentColor;
            fill: none;
        }
        
        /* ========== EMAIL SCREEN ========== */
        .onboarding-email {
            min-height: 75vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 40px 20px;
        }
        .email-card {
            max-width: 450px;
            width: 100%;
            background: linear-gradient(180deg, rgba(30, 20, 60, 0.95) 0%, rgba(15, 10, 35, 0.98) 100%);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 45px 40px;
            text-align: center;
            animation: cardSlideUp 0.6s cubic-bezier(0.22, 1, 0.36, 1) both;
        }
        .email-header {
            margin-bottom: 32px;
        }
        .email-icon-wrapper {
            width: 80px;
            height: 80px;
            background: var(--gradient-glow);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: var(--primary-light);
        }
        .email-icon-wrapper svg {
            stroke: currentColor;
            fill: none;
        }
        .email-title {
            font-size: 1.6rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        .email-subtitle {
            font-size: 0.95rem;
            color: var(--text-secondary);
        }
        .email-form {
            text-align: left;
            margin-bottom: 24px;
        }
        .email-form label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        .email-input-wrapper {
            position: relative;
        }
        .email-input-wrapper input {
            width: 100%;
            padding: 16px 18px 16px 50px;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        .email-input-wrapper input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 4px rgba(165, 148, 255, 0.15);
        }
        .email-input-wrapper input::placeholder {
            color: var(--text-muted);
        }
        .email-input-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            pointer-events: none;
        }
        .email-input-icon svg {
            width: 20px;
            height: 20px;
            stroke: currentColor;
            fill: none;
        }
        .email-hint {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 8px;
        }
        .email-form .error-message {
            margin-top: 8px;
        }
        
        /* Start Form Button */
        .btn-start-form {
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 16px 28px;
            background: var(--gradient-primary);
            border: none;
            border-radius: 12px;
            color: white;
            font-size: 1rem;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 8px 25px rgba(165, 148, 255, 0.25);
            margin-bottom: 14px;
        }
        .btn-start-form:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 35px rgba(165, 148, 255, 0.35);
        }
        .btn-start-form svg {
            stroke: currentColor;
            fill: none;
        }
        .btn-start-form:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Loading Spinner */
        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 2px solid transparent;
            border-top: 2px solid currentColor;
            border-radius: 50%;
            display: inline-block;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .btn-back-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 10px 18px;
            background: transparent;
            border: none;
            color: var(--text-muted);
            font-size: 0.85rem;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-back-link:hover {
            color: var(--text-primary);
        }
        .btn-back-link svg {
            stroke: currentColor;
            fill: none;
        }
        
        /* Mobile Responsivo para novas telas */
        @media (max-width: 768px) {
            .rules-card, .email-card {
                padding: 35px 24px;
            }
            .rule-item {
                flex-direction: column;
                text-align: center;
            }
            .rule-icon-svg {
                margin: 0 auto;
            }
            .btn-start-journey {
                width: 100%;
                justify-content: center;
            }
        }
        @media (max-width: 480px) {
            .intro-title {
                font-size: 1.6rem;
            }
            .intro-subtitle {
                font-size: 0.95rem;
            }
            .rules-title, .email-title {
                font-size: 1.4rem;
            }
            .rule-content h4 {
                font-size: 0.9rem;
            }
            .rule-content p {
                font-size: 0.8rem;
            }
        }
        
        /* ========== OLD WELCOME STYLES (keep for compatibility) ========== */
        .welcome-card::before {
            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            border-radius: 24px;
            padding: 2px;
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.5), rgba(165, 148, 255, 0.1), rgba(139, 92, 246, 0.5));
            background-size: 300% 300%;
            animation: gradientBorder 8s ease infinite;
            -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
            -webkit-mask-composite: xor;
            mask-composite: exclude;
            pointer-events: none;
            z-index: -1;
        }
        @keyframes gradientBorder {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .welcome-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: rgba(165, 148, 255, 0.1);
            border: 1px solid rgba(165, 148, 255, 0.3);
            padding: 12px 24px;
            border-radius: 50px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary-light);
            margin-bottom: 32px;
            animation: badgeAppear 0.8s cubic-bezier(0.34, 1.56, 0.64, 1) both;
        }
        @keyframes badgeAppear {
            0% { opacity: 0; transform: translateY(-30px) scale(0.8); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }
        .welcome-badge svg { width: 18px; height: 18px; animation: starPulse 2s ease-in-out infinite; stroke: currentColor; fill: none; }
        @keyframes starPulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.2) rotate(10deg); }
        }
        .welcome-title {
            font-size: clamp(1.8rem, 5vw, 3rem);
            font-weight: 900;
            margin-bottom: 24px;
            color: var(--text-primary);
            line-height: 1.15;
            animation: titleReveal 1s cubic-bezier(0.22, 1, 0.36, 1) 0.2s both;
        }
        @keyframes titleReveal {
            0% { opacity: 0; transform: translateY(40px); filter: blur(10px); }
            100% { opacity: 1; transform: translateY(0); filter: blur(0); }
        }
        .welcome-title .highlight {
            background: linear-gradient(135deg, #a594ff 0%, #8b5cf6 50%, #c084fc 100%);
            background-size: 200% auto;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: gradientText 4s ease infinite;
        }
        @keyframes gradientText {
            0%, 100% { background-position: 0% center; }
            50% { background-position: 200% center; }
        }
        .welcome-subtitle {
            font-size: 1.15rem;
            color: var(--text-secondary);
            line-height: 1.8;
            max-width: 520px;
            margin: 0 auto 44px;
            animation: subtitleReveal 1s cubic-bezier(0.22, 1, 0.36, 1) 0.4s both;
        }
        .welcome-subtitle strong { color: var(--primary-light); font-weight: 600; }
        @keyframes subtitleReveal {
            0% { opacity: 0; transform: translateY(30px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        /* TIMELINE */
        .welcome-timeline { display: flex; justify-content: center; align-items: center; gap: 0; margin-bottom: 48px; flex-wrap: wrap; }
        .timeline-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 12px;
            padding: 20px 32px;
            animation: stepAppear 0.8s cubic-bezier(0.22, 1, 0.36, 1) both;
        }
        .timeline-step:nth-child(1) { animation-delay: 0.5s; }
        .timeline-step:nth-child(3) { animation-delay: 0.7s; }
        .timeline-step:nth-child(5) { animation-delay: 0.9s; }
        @keyframes stepAppear {
            0% { opacity: 0; transform: translateY(30px) scale(0.9); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }
        .timeline-step-number {
            width: 56px; height: 56px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            font-weight: 800;
            color: white;
            box-shadow: 0 8px 32px rgba(139, 92, 246, 0.4);
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
        }
        .timeline-step:hover .timeline-step-number {
            transform: scale(1.2) rotate(10deg);
            box-shadow: 0 15px 50px rgba(139, 92, 246, 0.6);
        }
        .timeline-step-number::after {
            content: '';
            position: absolute;
            inset: -4px;
            border-radius: 50%;
            border: 2px solid rgba(139, 92, 246, 0.3);
            animation: ringPulse 2s ease-out infinite;
        }
        @keyframes ringPulse {
            0% { transform: scale(1); opacity: 1; }
            100% { transform: scale(1.4); opacity: 0; }
        }
        .timeline-step-text { font-size: 0.95rem; color: var(--text-secondary); font-weight: 600; transition: all 0.3s ease; }
        .timeline-step:hover .timeline-step-text { color: var(--primary-light); transform: scale(1.05); }
        .timeline-arrow { color: var(--primary); opacity: 0.6; animation: arrowBounce 1.5s ease-in-out infinite; }
        .timeline-arrow:nth-child(2) { animation-delay: 0.6s; }
        .timeline-arrow:nth-child(4) { animation-delay: 0.8s; }
        @keyframes arrowBounce {
            0%, 100% { transform: translateX(0); opacity: 0.4; }
            50% { transform: translateX(8px); opacity: 1; }
        }
        .timeline-arrow svg { width: 24px; height: 24px; stroke: currentColor; fill: none; }
        /* WELCOME INPUT */
        .welcome-input-group {
            max-width: 440px;
            margin: 0 auto 32px;
            text-align: left;
            animation: inputAppear 0.8s cubic-bezier(0.22, 1, 0.36, 1) 1s both;
        }
        @keyframes inputAppear {
            0% { opacity: 0; transform: translateY(20px); }
            100% { opacity: 1; transform: translateY(0); }
        }
        .welcome-input-group label { display: block; font-size: 0.95rem; font-weight: 600; color: var(--text-primary); margin-bottom: 12px; }
        .welcome-input-wrapper { position: relative; }
        .welcome-input-wrapper input {
            width: 100%;
            padding: 20px 22px 20px 56px;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            background: rgba(255, 255, 255, 0.03);
            border: 2px solid var(--border-color);
            border-radius: 16px;
            color: var(--text-primary);
            transition: all 0.4s cubic-bezier(0.22, 1, 0.36, 1);
        }
        .welcome-input-wrapper input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.06);
            box-shadow: 0 0 0 6px rgba(165, 148, 255, 0.12), 0 8px 32px rgba(139, 92, 246, 0.15);
            transform: translateY(-2px);
        }
        .welcome-input-wrapper input::placeholder { color: var(--text-muted); }
        .welcome-input-icon {
            position: absolute;
            left: 18px; top: 50%;
            transform: translateY(-50%);
            color: var(--text-muted);
            pointer-events: none;
            transition: all 0.4s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2;
        }
        .welcome-input-wrapper input:focus ~ .welcome-input-icon { color: var(--primary-light); transform: translateY(-50%) scale(1.1); }
        .welcome-input-icon svg { width: 20px; height: 20px; stroke: currentColor; fill: none; }
        .welcome-cta { animation: ctaAppear 0.8s cubic-bezier(0.22, 1, 0.36, 1) 1.1s both; }
        @keyframes ctaAppear {
            0% { opacity: 0; transform: translateY(20px) scale(0.95); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* BTN HERO */
        .btn-hero {
            display: inline-flex;
            align-items: center;
            gap: 14px;
            padding: 20px 52px;
            font-size: 1.15rem;
            font-weight: 700;
            font-family: 'Outfit', sans-serif;
            color: white;
            background: var(--gradient-primary);
            border: none;
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 10px 40px rgba(139, 92, 246, 0.4);
            position: relative;
            overflow: hidden;
        }
        .btn-hero::before {
            content: '';
            position: absolute;
            top: 0; left: -100%;
            width: 100%; height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            transition: left 0.6s ease;
        }
        .btn-hero:hover {
            transform: translateY(-5px) scale(1.03);
            box-shadow: 0 25px 60px rgba(139, 92, 246, 0.5);
        }
        .btn-hero:hover::before { left: 100%; }
        .btn-hero svg { width: 24px; height: 24px; transition: transform 0.4s cubic-bezier(0.34, 1.56, 0.64, 1); stroke: currentColor; fill: none; }
        .btn-hero:hover svg { transform: translateX(8px); }

        /* SUCCESS CARD */
        .success-card { text-align: center; padding: 60px 40px; }
        
        /* FINAL SUCCESS PAGE - Enhanced Design */
        .final-success-container {
            position: relative;
            padding: 20px;
        }
        .success-particles {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            overflow: hidden;
        }
        .final-success-card {
            background: linear-gradient(180deg, rgba(34, 197, 94, 0.08) 0%, rgba(15, 10, 35, 0.95) 30%);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 24px;
            padding: 50px 40px;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3), 0 0 100px rgba(34, 197, 94, 0.1);
        }
        .final-success-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 200px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--success), transparent);
        }
        .success-badge-top {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            background: rgba(34, 197, 94, 0.15);
            border: 1px solid rgba(34, 197, 94, 0.3);
            border-radius: 30px;
            padding: 10px 20px;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--success);
            margin-bottom: 30px;
        }
        .success-badge-top svg {
            stroke: currentColor;
            fill: none;
        }
        .success-icon-large {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 30px;
        }
        .success-icon-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 120px;
            height: 120px;
            border: 2px solid rgba(34, 197, 94, 0.2);
            border-radius: 50%;
            animation: ringPulse 2s ease-out infinite;
        }
        .success-icon-ring.ring-2 {
            animation-delay: 1s;
        }
        @keyframes ringPulse {
            0% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1.5); opacity: 0; }
        }
        .success-icon-inner {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.25), rgba(22, 163, 74, 0.15));
            border: 2px solid var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--success);
            animation: iconFloat 3s ease-in-out infinite;
        }
        .success-icon-inner svg {
            stroke: currentColor;
            fill: none;
        }
        @keyframes iconFloat {
            0%, 100% { transform: translate(-50%, -50%) translateY(0); }
            50% { transform: translate(-50%, -50%) translateY(-8px); }
        }
        .final-success-title {
            font-size: 2.5rem;
            font-weight: 800;
            margin-bottom: 12px;
            background: linear-gradient(135deg, var(--success), #4ade80);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .final-success-subtitle {
            font-size: 1.1rem;
            color: var(--text-secondary);
            margin-bottom: 35px;
        }
        .schedule-confirmation-card {
            background: rgba(34, 197, 94, 0.08);
            border: 1px solid rgba(34, 197, 94, 0.2);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 35px;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }
        .schedule-conf-header {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--success);
            margin-bottom: 16px;
            padding-bottom: 12px;
            border-bottom: 1px solid rgba(34, 197, 94, 0.15);
        }
        .schedule-conf-header svg {
            stroke: currentColor;
            fill: none;
        }
        .schedule-conf-details {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .schedule-conf-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1rem;
            color: var(--text-primary);
        }
        .schedule-conf-icon {
            font-size: 1.2rem;
        }
        .schedule-conf-value {
            font-weight: 500;
        }
        .next-steps-section {
            text-align: left;
            max-width: 450px;
            margin: 0 auto 30px;
        }
        .next-steps-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
            text-align: center;
        }
        .next-steps-list {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }
        .next-step-item {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 14px 16px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        .next-step-item:hover {
            background: rgba(255, 255, 255, 0.05);
            border-color: rgba(165, 148, 255, 0.3);
        }
        .next-step-number {
            width: 28px;
            height: 28px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
        }
        .next-step-text {
            display: flex;
            flex-direction: column;
            gap: 2px;
        }
        .next-step-text strong {
            font-size: 0.95rem;
            color: var(--text-primary);
        }
        .next-step-text span {
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        .final-note {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-size: 0.95rem;
            color: var(--text-secondary);
            padding-top: 20px;
            border-top: 1px solid var(--border-color);
        }
        .final-note svg {
            color: var(--success);
            stroke: currentColor;
            fill: none;
            flex-shrink: 0;
        }
        
        /* Old success card styles - keep for compatibility */
        .success-icon {
            width: 100px; height: 100px;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.1));
            border: 2px solid rgba(34, 197, 94, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            animation: successPulse 2s ease-in-out infinite;
            color: var(--success);
        }
        .success-icon svg { width: 50px; height: 50px; stroke: currentColor; fill: none; }
        @keyframes successPulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.3); }
            50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(34, 197, 94, 0.3); }
        }
        .success-title {
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: 16px;
            background: linear-gradient(135deg, var(--success), #16a34a);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .success-message { font-size: 1.05rem; color: var(--text-secondary); line-height: 1.7; margin-bottom: 10px; }
        .final-highlight {
            color: var(--primary-light);
            margin-top: 30px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        .final-highlight svg { width: 20px; height: 20px; animation: starPulse 2s ease-in-out infinite; stroke: currentColor; fill: none; }

        /* REFERRAL */
        .referral-card { text-align: center; padding: 30px; }
        .referral-reward-badge {
            display: inline-flex;
            flex-direction: column;
            align-items: center;
            gap: 4px;
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.2), rgba(22, 163, 74, 0.1));
            border: 2px solid rgba(34, 197, 94, 0.3);
            padding: 16px 32px;
            border-radius: 16px;
            margin-bottom: 24px;
            animation: rewardPulse 2s ease-in-out infinite;
        }
        .reward-amount {
            font-size: 2rem;
            font-weight: 800;
            color: var(--success);
            text-shadow: 0 0 20px rgba(34, 197, 94, 0.3);
        }
        .reward-text {
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--success);
            opacity: 0.8;
        }
        @keyframes rewardPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
            50% { box-shadow: 0 0 30px 10px rgba(34, 197, 94, 0.15); }
        }
        .referral-title { font-size: 1.5rem; font-weight: 700; margin-bottom: 12px; color: var(--text-primary); }
        .referral-description { font-size: 0.95rem; color: var(--text-secondary); line-height: 1.7; margin-bottom: 30px; max-width: 500px; margin-left: auto; margin-right: auto; }
        .referral-highlight { color: var(--success); font-weight: 700; }
        .referral-contacts { display: grid; grid-template-columns: repeat(2, 1fr); gap: 12px; margin-bottom: 20px; text-align: left; }
        .referral-input { position: relative; display: flex; align-items: center; gap: 10px; }
        .referral-input input { flex: 1; padding-left: 16px; }
        .referral-number {
            width: 28px; height: 28px;
            background: var(--gradient-primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
        }
        .referral-incentive {
            font-size: 0.9rem;
            color: var(--success);
            font-weight: 600;
            margin-top: 16px;
        }
        .add-referral-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            background: rgba(165, 148, 255, 0.1);
            border: 1px dashed var(--border-color);
            color: var(--primary-light);
            padding: 14px 24px;
            border-radius: 12px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-bottom: 10px;
        }
        .add-referral-btn:hover {
            background: rgba(165, 148, 255, 0.15);
            border-color: var(--primary);
            transform: scale(1.02);
        }

        /* SCHEDULING CARD */
        .scheduling-card {
            padding: 40px;
            text-align: center;
            overflow: visible !important;
        }
        .scheduling-card:hover {
            transform: none;
        }
        .scheduling-card::before {
            display: none;
        }
        .scheduling-header {
            margin-bottom: 30px;
        }
        .scheduling-icon {
            width: 70px;
            height: 70px;
            margin: 0 auto 20px;
            background: rgba(165, 148, 255, 0.1);
            border: 2px solid rgba(165, 148, 255, 0.3);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-light);
        }
        .scheduling-title {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 12px;
        }
        .scheduling-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            max-width: 500px;
            margin: 0 auto;
        }

        /* SCHEDULER */
        .scheduler-container {
            display: grid;
            grid-template-columns: 240px 1fr 240px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            min-height: 500px;
            text-align: left;
        }
        .scheduler-info {
            background: rgba(165, 148, 255, 0.05);
            padding: 30px 24px;
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            border-radius: 16px 0 0 16px;
        }
        .scheduler-logo {
            width: 52px; height: 52px;
            background: rgba(165, 148, 255, 0.15);
            border: 1px solid rgba(165, 148, 255, 0.3);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--primary-light);
            margin-bottom: 20px;
        }
        .scheduler-logo svg { width: 26px; height: 26px; }
        .scheduler-event-title { 
            font-size: 1.1rem; 
            font-weight: 700; 
            color: var(--text-primary); 
            line-height: 1.4; 
            margin-bottom: auto;
        }
        .scheduler-meta { display: flex; flex-direction: column; gap: 14px; margin-top: 30px; }
        .scheduler-duration, .scheduler-date-display { 
            display: flex; 
            align-items: center; 
            gap: 10px; 
            font-size: 0.9rem; 
            color: var(--text-secondary); 
        }
        .scheduler-duration svg, .scheduler-date-display svg { 
            width: 18px; 
            height: 18px; 
            color: var(--text-muted); 
            flex-shrink: 0; 
        }
        .scheduler-main { padding: 24px; display: flex; flex-direction: column; border-right: 1px solid var(--border-color); }
        .scheduler-section-title { font-size: 1rem; font-weight: 600; color: var(--text-primary); margin-bottom: 16px; }
        .calendar-nav { display: flex; align-items: center; justify-content: center; gap: 16px; margin-bottom: 16px; }
        .calendar-nav-btn {
            width: 32px; height: 32px;
            border: 1px solid var(--border-color);
            background: rgba(255, 255, 255, 0.05);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--text-secondary);
        }
        .calendar-nav-btn:hover:not(:disabled) { background: rgba(165, 148, 255, 0.15); border-color: var(--primary); color: var(--primary-light); transform: scale(1.1); }
        .calendar-nav-btn:disabled { opacity: 0.3; cursor: not-allowed; }
        .calendar-nav-btn svg { width: 16px; height: 16px; stroke: currentColor; fill: none; }
        .calendar-month { font-size: 1rem; font-weight: 600; color: var(--text-primary); min-width: 140px; text-align: center; }
        .calendar-weekdays { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; margin-bottom: 6px; }
        .calendar-weekdays span { text-align: center; font-size: 0.75rem; font-weight: 600; color: var(--text-muted); padding: 6px 0; }
        .calendar-days { display: grid; grid-template-columns: repeat(7, 1fr); gap: 2px; }
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 500;
            color: var(--text-muted);
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            border: 2px solid transparent;
        }
        .calendar-day:hover:not(.disabled):not(.empty) { background: rgba(165, 148, 255, 0.15); color: var(--primary-light); transform: scale(1.15); }
        .calendar-day.today { background: var(--primary); color: white; font-weight: 700; }
        .calendar-day.available { color: var(--primary-light); font-weight: 600; }
        .calendar-day.selected { background: var(--primary); color: white; font-weight: 700; transform: scale(1.1); box-shadow: 0 0 20px rgba(165, 148, 255, 0.5); }
        .calendar-day.disabled { color: var(--text-muted); opacity: 0.3; cursor: not-allowed; }
        .calendar-day.empty { cursor: default; }
        .calendar-timezone { 
            display: flex; 
            align-items: flex-start; 
            gap: 10px; 
            margin-top: 20px; 
            padding-top: 16px; 
            border-top: 1px solid var(--border-color); 
            font-size: 0.8rem; 
            color: var(--text-muted); 
        }
        .calendar-timezone svg { flex-shrink: 0; margin-top: 2px; }
        .timezone-text { display: flex; flex-direction: column; gap: 2px; }
        .timezone-text span { font-size: 0.75rem; color: var(--text-muted); }
        .timezone-text strong { color: var(--text-secondary); font-weight: 500; font-size: 0.8rem; }
        .scheduler-times { 
            background: rgba(255, 255, 255, 0.02); 
            padding: 20px 16px; 
            display: flex; 
            flex-direction: column; 
            gap: 10px; 
            overflow-y: auto;
            overflow-x: hidden;
            min-width: 0;
            border-radius: 0 16px 16px 0;
        }
        .times-placeholder { 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            justify-content: center; 
            text-align: center; 
            padding: 60px 16px; 
            color: var(--text-muted); 
            gap: 12px; 
            height: 100%; 
        }
        .times-placeholder svg { opacity: 0.4; }
        .times-placeholder p { font-size: 0.85rem; line-height: 1.5; }
        .time-slot {
            padding: 14px 20px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            text-align: center;
            font-size: 1rem;
            font-weight: 600;
            color: var(--primary-light);
            white-space: nowrap;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .time-slot:hover { background: rgba(165, 148, 255, 0.15); border-color: var(--primary); transform: scale(1.03); }
        .time-slot.selected { background: var(--gradient-primary); border-color: var(--primary); color: white; transform: scale(1.03); box-shadow: 0 0 20px rgba(165, 148, 255, 0.4); }
        .time-slot.unavailable { opacity: 0.4; cursor: not-allowed; }

        /* CONGRATULATIONS CARD - COMPACTO */
        .congratulations-card {
            text-align: center;
            padding: 20px 24px;
            margin-bottom: 12px;
        }
        .congrats-icon {
            width: 44px;
            height: 44px;
            margin: 0 auto 10px;
            background: rgba(34, 197, 94, 0.1);
            border: 2px solid rgba(34, 197, 94, 0.3);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: congratsPulse 2s ease-in-out infinite;
        }
        @keyframes congratsPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4); }
            50% { box-shadow: 0 0 15px 3px rgba(34, 197, 94, 0.15); }
        }
        .congrats-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--success);
            margin-bottom: 6px;
        }
        .congrats-text {
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 0;
            line-height: 1.4;
        }

        /* REFERRAL PROGRAM - NOVO DESIGN */
        .referral-program-card {
            padding: 40px;
            text-align: center;
        }
        .referral-hero-section {
            margin-bottom: 30px;
        }
        .referral-main-question {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 20px;
            line-height: 1.4;
            text-align: center;
        }
        .counter-prefix-inline {
            font-size: 1.8rem;
            font-weight: 900;
            color: var(--success);
            margin-left: 8px;
        }
        .animated-number-inline {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(135deg, #22c55e 0%, #4ade80 40%, #86efac 70%, #22c55e 100%);
            background-size: 300% 300%;
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            position: relative;
            animation: numberGlow 2s ease-in-out infinite, gradientShift 4s ease infinite;
            filter: drop-shadow(0 0 15px rgba(34, 197, 94, 0.4));
            margin: 0 2px;
        }
        @keyframes numberGlow {
            0%, 100% { filter: drop-shadow(0 0 10px rgba(34, 197, 94, 0.3)); }
            50% { filter: drop-shadow(0 0 25px rgba(34, 197, 94, 0.7)); }
        }
        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .counter-suffix-inline {
            font-size: 1.3rem;
            font-weight: 700;
            color: var(--success);
        }
        .referral-description-text {
            font-size: 1rem;
            color: var(--text-secondary);
            line-height: 1.7;
            margin-bottom: 20px;
            max-width: 500px;
            margin-left: auto;
            margin-right: auto;
        }
        .highlight-green {
            color: var(--success);
            font-weight: 700;
        }
        .commission-highlight {
            background: linear-gradient(135deg, rgba(34, 197, 94, 0.15), rgba(22, 163, 74, 0.08));
            border: 2px solid rgba(34, 197, 94, 0.4);
            border-radius: 20px;
            padding: 24px 32px;
            margin: 30px auto;
            max-width: 480px;
            text-align: center;
            box-shadow: 0 8px 32px rgba(34, 197, 94, 0.15);
            position: relative;
            overflow: hidden;
        }
        .commission-highlight::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--success), #4ade80, var(--success));
            border-radius: 20px 20px 0 0;
        }
        .commission-icon {
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--success);
            margin-bottom: 16px;
        }
        .commission-content {
            text-align: center;
        }
        .commission-label {
            font-size: 1rem;
            color: var(--text-primary);
            margin-bottom: 8px;
            font-weight: 600;
            line-height: 1.4;
        }
        .commission-value {
            font-size: 2.2rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--success), #4ade80);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            filter: drop-shadow(0 2px 8px rgba(34, 197, 94, 0.3));
        }

        /* Responsive para o novo design */
        @media (max-width: 768px) {
            .animated-number-inline { font-size: 2rem; }
            .counter-prefix-inline { font-size: 1.5rem; }
            .counter-suffix-inline { font-size: 1.1rem; }
            .referral-main-question { font-size: 1.1rem; }
            .commission-highlight {
                padding: 20px 24px;
                margin: 20px auto;
                max-width: 95%;
            }
            .commission-content { text-align: center; }
            .commission-value { font-size: 1.8rem; }
        }
        @media (max-width: 480px) {
            .animated-number-inline { font-size: 1.8rem; }
            .counter-prefix-inline { font-size: 1.3rem; }
            .counter-suffix-inline { font-size: 1rem; }
            .referral-main-question { font-size: 1rem; }
        }
        .referral-question {
            margin-top: 30px;
            margin-bottom: 24px;
        }
        .referral-question label {
            display: block;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 12px;
        }
        .referral-options {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .referral-option {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px 20px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .referral-option:hover {
            background: rgba(34, 197, 94, 0.05);
            border-color: rgba(34, 197, 94, 0.3);
        }
        .referral-option.selected {
            background: rgba(34, 197, 94, 0.1);
            border-color: var(--success);
        }
        .referral-option input { display: none; }
        .referral-option::before {
            content: '';
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-color);
            border-radius: 50%;
            transition: all 0.3s ease;
        }
        .referral-option.selected::before {
            border-color: var(--success);
            background: var(--success);
            box-shadow: inset 0 0 0 4px var(--bg-dark);
        }
        .referral-option span { color: var(--text-primary); font-size: 0.95rem; }
        .referral-inputs-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
            margin-top: 20px;
        }
        .referral-input-row {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        .input-number {
            width: 32px;
            height: 32px;
            background: var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.85rem;
            font-weight: 700;
            color: white;
            flex-shrink: 0;
        }
        .referral-input-row input {
            flex: 1;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            padding: 14px 16px;
            color: var(--text-primary);
            font-size: 0.9rem;
            font-family: 'Outfit', sans-serif;
        }
        .referral-input-row input:first-of-type {
            flex: 1.2;
        }
        .referral-input-row input:last-of-type {
            flex: 1;
        }
        .referral-input-row input::placeholder { color: var(--text-muted); }
        .referral-input-row input:focus { border-color: var(--success); outline: none; box-shadow: 0 0 0 3px rgba(34, 197, 94, 0.15); }
        .add-referral-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            width: 100%;
            padding: 16px;
            margin-top: 16px;
            background: rgba(34, 197, 94, 0.1);
            border: 2px dashed rgba(34, 197, 94, 0.4);
            border-radius: 12px;
            color: var(--success);
            font-size: 0.95rem;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .add-referral-btn:hover {
            background: rgba(34, 197, 94, 0.15);
            border-color: var(--success);
            transform: translateY(-2px);
        }
        .add-referral-btn svg {
            stroke: currentColor;
            fill: none;
        }
        .input-number.extra {
            background: var(--primary);
        }
        .referral-input-row.extra.new-field {
            opacity: 0;
            animation: slideInRow 0.3s ease forwards;
        }
        @keyframes slideInRow {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .referral-bonus-hint {
            text-align: center;
            font-size: 0.85rem;
            color: var(--success);
            margin-top: 16px;
            font-weight: 500;
        }
        .btn-green {
            background: var(--success) !important;
            border-color: var(--success) !important;
        }
        .btn-green:hover {
            background: #16a34a !important;
            box-shadow: 0 0 30px rgba(34, 197, 94, 0.4) !important;
        }

        /* OLD REFERRAL STYLES - keep for compatibility */
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
        }
        .time-slot:hover { background: rgba(165, 148, 255, 0.15); border-color: var(--primary); transform: scale(1.05); }
        .time-slot.selected { background: var(--gradient-primary); border-color: var(--primary); color: white; transform: scale(1.05); box-shadow: 0 0 20px rgba(165, 148, 255, 0.4); }
        
        /* REFERRAL SYSTEM */
        .referral-info {
            background: linear-gradient(135deg, rgba(165, 148, 255, 0.1) 0%, rgba(102, 126, 234, 0.05) 100%);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 24px;
            margin-bottom: 30px;
        }
        .referral-badge {
            display: inline-block;
            background: var(--gradient-primary);
            color: white;
            font-size: 0.75rem;
            font-weight: 700;
            padding: 6px 12px;
            border-radius: 20px;
            margin-bottom: 16px;
        }
        .referral-info h3 {
            font-size: 1.2rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 16px;
        }
        .referral-benefits {
            list-style: none;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        .referral-benefits li {
            font-size: 0.95rem;
            color: var(--text-secondary);
        }
        .referral-contact-item {
            position: relative;
            padding: 16px;
            background: rgba(255, 255, 255, 0.02);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            margin-bottom: 16px;
            animation: slideIn 0.3s ease;
        }
        .remove-referral {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 28px;
            height: 28px;
            background: rgba(255, 107, 107, 0.1);
            border: 1px solid rgba(255, 107, 107, 0.3);
            border-radius: 50%;
            color: var(--error);
            font-size: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }
        .remove-referral:hover {
            background: rgba(255, 107, 107, 0.2);
            transform: scale(1.1);
        }
        .add-referral-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            padding: 14px 20px;
            background: rgba(165, 148, 255, 0.1);
            border: 1px dashed var(--primary);
            border-radius: 12px;
            color: var(--primary-light);
            font-size: 0.95rem;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 30px;
        }
        .add-referral-btn:hover {
            background: rgba(165, 148, 255, 0.2);
            transform: translateY(-2px);
        }
        .btn-skip {
            background: transparent;
            border: 1px solid var(--border-color);
            color: var(--text-muted);
            padding: 14px 24px;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            font-family: 'Outfit', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .btn-skip:hover {
            border-color: var(--primary);
            color: var(--primary-light);
        }
        .timeslot {
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            border-radius: 10px;
            text-align: center;
            font-size: 0.9rem;
            font-weight: 600;
            color: var(--primary-light);
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
            font-family: 'Outfit', sans-serif;
        }
        .timeslot:hover:not(:disabled) {
            background: rgba(165, 148, 255, 0.15);
            border-color: var(--primary);
            transform: scale(1.05);
        }
        .timeslot.selected {
            background: var(--gradient-primary);
            border-color: var(--primary);
            color: white;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(165, 148, 255, 0.4);
        }
        .timeslot.unavailable {
            opacity: 0.4;
            cursor: not-allowed;
            text-decoration: line-through;
        }
        .timeslots-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
        }
        .timeslots-title {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        .timeslots-subtitle {
            font-size: 0.9rem;
            color: var(--primary-light);
            margin-bottom: 16px;
        }
        .no-date-selected {
            grid-column: 1 / -1;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.9rem;
            padding: 20px;
        }
        .popup-message {
            text-align: center;
            font-size: 1rem;
            color: var(--text-secondary);
            margin-bottom: 24px;
        }
        .popup-actions {
            display: flex;
            gap: 12px;
            justify-content: center;
        }
        .popup-actions .btn {
            flex: 1;
            justify-content: center;
        }
        /* POPUP */
        .popup-overlay {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            background: rgba(10, 4, 32, 0.9);
            backdrop-filter: blur(10px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        .popup-overlay.active { display: flex; opacity: 1; }
        .popup-content {
            background: linear-gradient(180deg, rgba(30, 20, 60, 0.98) 0%, rgba(15, 10, 35, 0.98) 100%);
            border: 1px solid var(--border-color);
            border-radius: 24px;
            padding: 40px;
            max-width: 440px;
            width: 100%;
            position: relative;
            animation: popupIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5), 0 0 100px rgba(165, 148, 255, 0.1);
        }
        @keyframes popupIn {
            from { opacity: 0; transform: scale(0.8) translateY(30px) rotateX(10deg); }
            to { opacity: 1; transform: scale(1) translateY(0) rotateX(0deg); }
        }
        .popup-close {
            position: absolute;
            top: 16px; right: 16px;
            width: 36px; height: 36px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-muted);
            transition: all 0.3s ease;
        }
        .popup-close:hover { background: rgba(255, 107, 107, 0.2); border-color: var(--error); color: var(--error); transform: rotate(90deg); }
        .popup-close svg { width: 18px; height: 18px; stroke: currentColor; fill: none; }
        .popup-icon {
            width: 70px; height: 70px;
            background: var(--gradient-glow);
            border: 1px solid var(--border-color);
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            color: var(--primary-light);
        }
        .popup-icon svg { width: 34px; height: 34px; stroke: currentColor; fill: none; }
        .popup-title { text-align: center; font-size: 1.4rem; font-weight: 700; color: var(--text-primary); margin-bottom: 20px; }
        .popup-schedule-info {
            background: rgba(165, 148, 255, 0.1);
            border: 1px solid rgba(165, 148, 255, 0.25);
            border-radius: 14px;
            padding: 16px 20px;
            margin-bottom: 24px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .popup-schedule-item {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1rem;
            color: var(--text-primary);
            font-weight: 500;
        }
        .popup-schedule-item svg {
            color: var(--primary-light);
            flex-shrink: 0;
        }
        .popup-email-form {
            margin-bottom: 24px;
        }
        .popup-email-form label {
            display: block;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        .popup-email-form input {
            width: 100%;
            padding: 16px 18px;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        .popup-email-form input:focus {
            outline: none;
            border-color: var(--primary);
            background: rgba(255, 255, 255, 0.08);
            box-shadow: 0 0 0 4px rgba(165, 148, 255, 0.15);
        }
        .popup-email-form input::placeholder { color: var(--text-muted); }
        .popup-hint {
            font-size: 0.8rem;
            color: var(--text-muted);
            margin-top: 8px;
        }
        .popup-details {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border-color);
            border-radius: 14px;
            padding: 16px 20px;
            margin-bottom: 24px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }
        .popup-detail-item { display: flex; align-items: center; gap: 12px; font-size: 0.95rem; color: var(--text-primary); font-weight: 500; }
        .popup-detail-item svg { width: 18px; height: 18px; color: var(--primary-light); flex-shrink: 0; stroke: currentColor; fill: none; }
        .popup-form { margin-bottom: 24px; }
        .popup-form label { display: block; font-size: 0.9rem; font-weight: 600; color: var(--text-primary); margin-bottom: 10px; }
        .popup-form input {
            width: 100%;
            padding: 14px 18px;
            font-size: 1rem;
            font-family: 'Outfit', sans-serif;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            color: var(--text-primary);
            transition: all 0.3s ease;
        }
        .popup-form input:focus { outline: none; border-color: var(--primary); background: rgba(255, 255, 255, 0.08); box-shadow: 0 0 0 4px rgba(165, 148, 255, 0.15); }
        .popup-form input::placeholder { color: var(--text-muted); }
        .popup-hint { font-size: 0.8rem; color: var(--text-muted); margin-top: 8px; }
        .popup-btn { width: 100%; justify-content: center; padding: 16px 24px; font-size: 1rem; }
        .popup-btn svg { width: 20px; height: 20px; }
        .image-preview-area { margin-top: 16px; border-radius: 12px; overflow: hidden; display: none; }
        .image-preview-area.has-image { display: block; }
        .image-preview-area img { width: 100%; max-height: 300px; object-fit: contain; border-radius: 12px; border: 1px solid var(--border-color); }

        /* RESPONSIVE */
        @media (max-width: 1100px) {
            .scheduler-container { 
                grid-template-columns: 200px 1fr 200px;
            }
            .container.expanded { max-width: 95%; }
        }
        @media (max-width: 950px) {
            .scheduler-container { 
                grid-template-columns: 180px 1fr 160px;
            }
        }
        @media (max-width: 850px) {
            .scheduler-container { grid-template-columns: 1fr; grid-template-rows: auto auto auto; }
            .scheduler-info { border-right: none; border-bottom: 1px solid var(--border-color); padding: 24px 20px; border-radius: 16px 16px 0 0; }
            .scheduler-main { border-right: none; }
            .scheduler-times { border-top: 1px solid var(--border-color); flex-direction: row; flex-wrap: wrap; padding: 16px 20px; gap: 10px; border-radius: 0 0 16px 16px; }
            .time-slot { flex: 1; min-width: 80px; }
            .times-placeholder { width: 100%; padding: 16px; flex-direction: row; }
            .referral-inputs-grid { grid-template-columns: 1fr; }
            .scheduling-card { padding: 30px 20px; }
            .scheduling-title { font-size: 1.5rem; }
            .container.expanded { max-width: 100%; }
        }
        @media (max-width: 768px) {
            body { padding-top: 70px; padding-bottom: 40px; }
            .progress-container { height: 60px; padding: 0 16px; gap: 12px; }
            .logo { font-size: 0.95rem; }
            .logo img { height: 26px; }
            .card { padding: 28px 22px; border-radius: 20px; }
            .welcome-card { padding: 40px 24px; margin-top: 20px; }
            .welcome-title { font-size: 2.2rem; }
            .welcome-timeline { flex-direction: column; gap: 8px; }
            .timeline-arrow { transform: rotate(90deg); }
            .timeline-step { padding: 16px; }
            .timeline-step-number { width: 48px; height: 48px; font-size: 1rem; }
            .btn-hero { width: 100%; justify-content: center; padding: 18px 40px; }
            input[type="text"], input[type="email"], input[type="tel"], input[type="number"], input[type="password"], textarea { padding: 14px 16px; font-size: 16px; }
            .checkbox-grid { grid-template-columns: 1fr; }
            .navigation { flex-direction: column; gap: 12px; }
            .btn { width: 100%; justify-content: center; }
            .btn-back { order: 2; }
            .btn-next, .btn-submit { order: 1; }
            .referral-contacts { grid-template-columns: 1fr; }
            .referral-input-row { flex-wrap: wrap; }
            .referral-input-row input { flex: 1 1 45%; min-width: 120px; }
            .success-card { padding: 40px 24px; }
            .success-icon { width: 80px; height: 80px; }
            .success-icon svg { width: 40px; height: 40px; }
            .final-success-card { padding: 35px 24px; }
            .final-success-title { font-size: 2rem; }
            .success-icon-large { width: 100px; height: 100px; }
            .success-icon-inner { width: 80px; height: 80px; }
            .success-icon-inner svg { width: 36px; height: 36px; }
            .success-icon-ring { width: 100px; height: 100px; }
            .schedule-confirmation-card { padding: 20px; }
            .next-steps-section { padding: 0 10px; }
            .popup-content { padding: 30px 24px; }
            .popup-actions { flex-direction: column; }
            .popup-actions .btn { width: 100%; }
        }
        @media (max-width: 480px) {
            .logo span { display: none; }
            .card { padding: 24px 18px; }
            .section-header h2 { font-size: 1.35rem; }
            .welcome-title { font-size: 1.8rem; }
            .welcome-badge { font-size: 0.8rem; padding: 10px 18px; }
            .welcome-input-wrapper input { padding: 16px 16px 16px 46px; font-size: 0.95rem; }
            .welcome-input-icon { left: 16px; }
            .welcome-input-icon svg { width: 18px; height: 18px; }
            .referral-input-row { gap: 8px; }
            .referral-input-row input { flex: 1 1 100%; padding: 12px 14px; }
            .input-number { width: 28px; height: 28px; font-size: 0.75rem; }
            .final-success-card { padding: 30px 18px; }
            .final-success-title { font-size: 1.7rem; }
            .final-success-subtitle { font-size: 1rem; }
            .next-step-item { padding: 12px; }
            .final-note { flex-direction: column; text-align: center; gap: 8px; }
        }
    </style>
</head>
<body>
    <!-- Epic Background Effects -->
    <div class="aurora"></div>
    <div class="morphing-bg"></div>
    <div class="bg-animation"></div>
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>
    <div class="orb orb-3"></div>
    <div class="particles-container" id="particlesContainer"></div>
    
    <!-- Celebration Elements -->
    <canvas id="confetti-canvas"></canvas>
    <canvas id="fireworks-canvas"></canvas>
    <div class="celebration-overlay" id="celebrationOverlay"></div>
    <div class="epic-celebration-text" id="epicText">🎉 PARABÉNS! 🎉</div>

    <!-- Progress Bar -->
    <div class="progress-container">
        <div class="logo">
            <img src="https://imagens-zipline.hgabnb.easypanel.host/u/2FsJTY.png" alt="SalesDever">
            <span>SalesDever</span>
        </div>
        <div class="progress-wrapper">
            <div class="progress-steps" id="progressSteps">
                <div class="step-indicator"></div>
                <div class="step-indicator"></div>
                <div class="step-indicator"></div>
                <div class="step-indicator"></div>
                <div class="step-indicator"></div>
                <div class="step-indicator"></div>
                <div class="step-indicator"></div>
                <div class="step-indicator"></div>
            </div>
            <div class="progress-info">
                <span class="step-name" id="stepName">Login</span>
                <span class="step-count" id="stepCount">Etapa 1 de 8</span>
            </div>
        </div>
    </div>

    <div class="container">
        <form id="onboardingForm">
            <!-- ETAPA 1: WELCOME & REGRAS -->
            <div class="form-section active" data-step="1" data-name="Início">
                
                <!-- TELA 1: Hero Impactante -->
                <div class="onboarding-intro" id="introScreen">
                    <div class="intro-content">
                        <div class="intro-badge animate-pop">
                            <svg viewBox="0 0 24 24" width="18" height="18"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                            <span>Onboarding SalesDever</span>
                        </div>
                        
                        <h1 class="intro-title animate-slide">
                            Vamos criar sua <span class="text-gradient">IA SDR</span>
                        </h1>
                        
                        <p class="intro-subtitle animate-fade">
                            Responda este formulário e em até <strong>3 dias úteis</strong> sua assistente<br>
                            virtual estará pronta para trabalhar 24/7 pela sua empresa.
                        </p>
                        
                        <!-- Timeline com Linha Curva Mágica -->
                        <div class="epic-steps-container animate-scale">
                            
                            <!-- Linha Mobile -->
                            <div class="mobile-line"></div>
                            
                            <!-- SVG Linha Curva Desktop -->
                            <svg class="curved-path-svg" viewBox="0 0 900 380" preserveAspectRatio="xMidYMid meet">
                                <defs>
                                    <linearGradient id="curveGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" stop-color="rgba(165, 148, 255, 0.8)" />
                                        <stop offset="50%" stop-color="rgba(139, 92, 246, 1)" />
                                        <stop offset="100%" stop-color="rgba(192, 132, 252, 0.8)" />
                                    </linearGradient>
                                </defs>
                                
                                <!-- Glow da linha (blur) -->
                                <path class="glow-curve-path"
                                    d="M 85 270 
                                       Q 180 270, 250 200
                                       Q 320 130, 420 130
                                       Q 520 130, 580 80
                                       Q 640 30, 750 30
                                       Q 820 30, 860 30"
                                />
                                
                                <!-- Linha principal -->
                                <path class="main-curve-path"
                                    d="M 85 270 
                                       Q 180 270, 250 200
                                       Q 320 130, 420 130
                                       Q 520 130, 580 80
                                       Q 640 30, 750 30
                                       Q 820 30, 860 30"
                                />
                                
                                <!-- Bolinha viajando -->
                                <circle class="traveling-dot" r="8" fill="white" filter="drop-shadow(0 0 10px white) drop-shadow(0 0 20px rgba(165,148,255,0.8))">
                                    <animateMotion
                                        dur="4s"
                                        repeatCount="indefinite"
                                        begin="2.8s"
                                        path="M 85 270 Q 180 270, 250 200 Q 320 130, 420 130 Q 520 130, 580 80 Q 640 30, 750 30 Q 820 30, 860 30"
                                    />
                                </circle>
                            </svg>
                            
                            <!-- Step 1 -->
                            <div class="epic-step" data-epic="1">
                                <div class="step-content-wrapper">
                                    <div class="step-bg-number">1</div>
                                    <div class="step-card-wrapper">
                                        <div class="step-card-inner">
                                            <svg class="step-svg" viewBox="0 0 24 24" width="32" height="32">
                                                <path d="M12 20h9" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
                                                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                        <h3 class="step-title">Você responde</h3>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Step 2 -->
                            <div class="epic-step" data-epic="2">
                                <div class="step-content-wrapper">
                                    <div class="step-bg-number">2</div>
                                    <div class="step-card-wrapper">
                                        <div class="step-card-inner">
                                            <svg class="step-svg spinning-icon" viewBox="0 0 24 24" width="32" height="32">
                                                <circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="2" fill="none"/>
                                                <path d="M12 2v2M12 20v2M4.93 4.93l1.41 1.41M17.66 17.66l1.41 1.41M2 12h2M20 12h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                            </svg>
                                        </div>
                                        <h3 class="step-title">Nós criamos</h3>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Step 3 -->
                            <div class="epic-step" data-epic="3">
                                <div class="step-content-wrapper">
                                    <div class="step-bg-number">3</div>
                                    <div class="step-card-wrapper">
                                        <div class="step-card-inner">
                                            <svg class="step-svg" viewBox="0 0 24 24" width="32" height="32">
                                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
                                                <path class="check-path" d="M22 4L12 14.01l-3-3" stroke="currentColor" stroke-width="2.5" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                                            </svg>
                                        </div>
                                        <h3 class="step-title">Ativamos juntos</h3>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <button type="button" class="btn-start-journey" onclick="showRulesScreen()">
                            <span>Começar Onboarding</span>
                            <svg viewBox="0 0 24 24" width="20" height="20"><path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                        </button>
                    </div>
                </div>
                
                <!-- TELA 2: Regras do Jogo -->
                <div class="onboarding-rules" id="rulesScreen" style="display: none;">
                    <div class="rules-card">
                        <div class="rules-header">
                            <div class="rules-icon-wrapper">
                                <svg viewBox="0 0 24 24" width="32" height="32"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" stroke="currentColor" stroke-width="1.5" fill="none"/><polyline points="14 2 14 8 20 8" stroke="currentColor" stroke-width="1.5" fill="none"/><line x1="16" y1="13" x2="8" y2="13" stroke="currentColor" stroke-width="1.5"/><line x1="16" y1="17" x2="8" y2="17" stroke="currentColor" stroke-width="1.5"/><polyline points="10 9 9 9 8 9" stroke="currentColor" stroke-width="1.5"/></svg>
                            </div>
                            <h2 class="rules-title">Antes de começar...</h2>
                            <p class="rules-subtitle">Precisamos combinar algumas informações pra isso aqui funcionar de verdade!</p>
                        </div>
                        
                        <div class="rules-list">
                            <div class="rule-item">
                                <div class="rule-icon-svg">
                                    <svg viewBox="0 0 24 24" width="24" height="24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                                </div>
                                <div class="rule-content">
                                    <h4>Separe um tempo tranquilo</h4>
                                    <p>Pega um café, fecha as outras abas e foca aqui. São só ~15 minutinhos!</p>
                                </div>
                            </div>
                            
                            <div class="rule-item">
                                <div class="rule-icon-svg">
                                    <svg viewBox="0 0 24 24" width="24" height="24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><circle cx="12" cy="12" r="6" stroke="currentColor" stroke-width="1.5" fill="none"/><circle cx="12" cy="12" r="2" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                                </div>
                                <div class="rule-content">
                                    <h4>Quanto mais info, melhor sua IA</h4>
                                    <p>Sério, vai por mim! Quanto mais detalhes você der, mais incrível vai ser sua assistente.</p>
                                </div>
                            </div>
                            
                            <div class="rule-item">
                                <div class="rule-icon-svg">
                                    <svg viewBox="0 0 24 24" width="24" height="24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3" stroke="currentColor" stroke-width="1.5" fill="none"/><line x1="12" y1="17" x2="12.01" y2="17" stroke="currentColor" stroke-width="1.5"/></svg>
                                </div>
                                <div class="rule-content">
                                    <h4>Não sabe algo? Sem crise!</h4>
                                    <p>Se travar em alguma pergunta, coloca o que vier na cabeça. A gente ajusta junto depois na call!</p>
                                </div>
                            </div>
                            
                        </div>
                        
                        <div class="rules-agreement">
                            <label class="agreement-checkbox" onclick="toggleAgreement(this)">
                                <input type="checkbox" id="agreeRules">
                                <span class="checkbox-custom">
                                    <svg viewBox="0 0 24 24" width="16" height="16"><polyline points="20 6 9 17 4 12" stroke="currentColor" stroke-width="2.5" fill="none"/></svg>
                                </span>
                                <span class="checkbox-text">
                                    Entendi! Vou dedicar minha atenção total para preencher com cuidado.
                                </span>
                            </label>
                        </div>
                        
                        <button type="button" class="btn-continue-rules" id="btnContinueRules" onclick="showEmailScreen()" disabled>
                            <span>Continuar</span>
                            <svg viewBox="0 0 24 24" width="20" height="20"><path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                        </button>
                    </div>
                </div>
                
                <!-- TELA 3: Email -->
                <div class="onboarding-email" id="emailScreen" style="display: none;">
                    <div class="email-card">
                        <div class="email-header">
                            <div class="email-icon-wrapper">
                                <svg viewBox="0 0 24 24" width="40" height="40"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="1.5" fill="none"/><polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                            </div>
                            <h2 class="email-title">Quase lá!</h2>
                            <p class="email-subtitle">Só precisamos do seu e-mail para começar</p>
                        </div>
                        
                        <div class="email-form">
                            <label>Seu melhor e-mail <span class="required">*</span></label>
                            <div class="email-input-wrapper">
                                <input type="email" name="email" id="emailInput" required placeholder="seu@email.com.br">
                                <div class="email-input-icon">
                                    <svg viewBox="0 0 24 24"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg>
                                </div>
                            </div>
                            <p class="email-hint">Usaremos para enviar o convite da reunião e atualizações importantes</p>
                            <div class="error-message">Insira um e-mail válido</div>
                        </div>
                        
                        <button type="button" class="btn-start-form" onclick="startOnboarding()">
                            <span>Começar Onboarding</span>
                            <svg viewBox="0 0 24 24" width="20" height="20"><path d="M5 12h14M12 5l7 7-7 7" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                        </button>
                        
                        <button type="button" class="btn-back-link" onclick="showRulesScreen()">
                            <svg viewBox="0 0 24 24" width="16" height="16"><path d="M19 12H5M12 19l-7-7 7-7" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                            Voltar
                        </button>
                    </div>
                </div>
            </div>

            <!-- ETAPA 2: EQUIPE -->
            <div class="form-section" data-step="2" data-name="Equipe">
                <div class="card">
                    <div class="section-header">
                        <div class="section-icon float-animation">
                            <svg viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/></svg>
                        </div>
                        <h2>Sua Equipe</h2>
                        <p>Precisamos saber quem será envolvido no projeto para organizarmos a comunicação.</p>
                    </div>

                    <div class="form-group">
                        <label>Tem algum sócio que vai participar do projeto?<span class="required">*</span></label>
                        <div class="option-group">
                            <div class="option-item" onclick="selectOption(this, 'socio')">
                                <input type="radio" name="tem_socio" value="nao" required>
                                <div class="option-content">
                                    <label>Não, sou o único responsável</label>
                                </div>
                            </div>
                            <div class="option-item" onclick="selectOption(this, 'socio')">
                                <input type="radio" name="tem_socio" value="sim">
                                <div class="option-content">
                                    <label>Sim, tenho sócio(s) que participarão</label>
                                    <div class="sub-input">
                                        <input type="tel" name="socio_telefone" placeholder="Número do sócio para adicionarmos no grupo">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="error-message">Selecione uma opção</div>
                    </div>

                    <div class="form-group">
                        <label>Quem é o responsável técnico pelas integrações da sua empresa?<span class="required">*</span></label>
                        <div class="option-group">
                            <div class="option-item" onclick="selectOption(this, 'tecnico')">
                                <input type="radio" name="responsavel_tecnico" value="eu" required>
                                <div class="option-content">
                                    <label>Eu mesmo cuido da parte técnica</label>
                                </div>
                            </div>
                            <div class="option-item" onclick="selectOption(this, 'tecnico')">
                                <input type="radio" name="responsavel_tecnico" value="outro">
                                <div class="option-content">
                                    <label>Outra pessoa/equipe</label>
                                    <div class="sub-input">
                                        <input type="tel" name="tecnico_telefone" placeholder="Número do responsável técnico">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="error-message">Selecione uma opção</div>
                    </div>

                    <div class="form-group">
                        <label>Quem é o responsável pela geração de leads da sua empresa?<span class="required">*</span></label>
                        <div class="option-group">
                            <div class="option-item" onclick="selectOption(this, 'leads')">
                                <input type="radio" name="responsavel_leads" value="eu" required>
                                <div class="option-content">
                                    <label>Eu cuido da geração de leads</label>
                                </div>
                            </div>
                            <div class="option-item" onclick="selectOption(this, 'leads')">
                                <input type="radio" name="responsavel_leads" value="agencia">
                                <div class="option-content">
                                    <label>Agência ou terceirizado</label>
                                    <div class="sub-input">
                                        <input type="tel" name="agencia_telefone" placeholder="Número do responsável pela geração de leads">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="error-message">Selecione uma opção</div>
                    </div>

                    <div class="navigation">
                        <button type="button" class="btn btn-back" onclick="prevStep()">
                            <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-next" onclick="nextStep()">
                            Continuar
                            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>
            <!-- ETAPA 3: ASSISTENTE -->
            <div class="form-section" data-step="3" data-name="Assistente">
                <div class="card">
                    <div class="section-header">
                        <div class="section-icon float-animation">
                            <svg viewBox="0 0 24 24"><rect x="3" y="11" width="18" height="10" rx="2"/><circle cx="12" cy="5" r="2"/><path d="M12 7v4"/><circle cx="8" cy="16" r="1"/><circle cx="16" cy="16" r="1"/></svg>
                        </div>
                        <h2>Sua Assistente</h2>
                        <p>Vamos dar vida à sua IA SDR. Defina a identidade e objetivo dela.</p>
                    </div>

                    <div class="form-group">
                        <label>Qual será o nome dela?<span class="required">*</span></label>
                        <p class="hint">Ex: Grazi, Ana, Julia... Escolha um nome que combine com a sua marca.</p>
                        <input type="text" name="nome_assistente" required placeholder="Ex: Grazi">
                        <div class="error-message">Defina um nome para sua assistente</div>
                    </div>

                    <div class="form-group">
                        <label>DDD do número dela<span class="required">*</span></label>
                        <p class="hint">Código de área de preferência para as ligações. Caso sua região seja muito restrita, usaremos um DDD próximo.</p>
                        <input type="text" name="ddd_assistente" required placeholder="Ex: 11" maxlength="2">
                        <div class="error-message">Informe o DDD</div>
                    </div>

                    <div class="form-group">
                        <label>Qual o objetivo da sua assistente? O que ela deve fazer?<span class="required">*</span></label>
                        <p class="hint">Ex: Qualificar leads e agendar demonstrações, Fazer primeiro contato e encaminhar para vendedor, etc.</p>
                        <textarea name="objetivo_assistente" required placeholder="Descreva o que você espera que a IA faça nas ligações..."></textarea>
                        <div class="error-message">Descreva o objetivo da assistente</div>
                    </div>

                    <div class="form-group">
                        <label>Segmento de atuação<span class="required">*</span></label>
                        <p class="hint">Ex: Tecnologia, Imobiliária, Advocacia, Saúde...</p>
                        <input type="text" name="segmento" required placeholder="Ex: Tecnologia / SaaS">
                        <div class="error-message">Informe o segmento</div>
                    </div>

                    <div class="form-group">
                        <label>Descreva o que vocês oferecem<span class="required">*</span></label>
                        <p class="hint">Descreva detalhadamente seu produto ou serviço principal.</p>
                        <textarea name="produto_servico" required placeholder="Ex: Oferecemos uma plataforma de automação de vendas que utiliza IA para qualificar leads e agendar reuniões automaticamente..."></textarea>
                        <div class="error-message">Descreva seu produto/serviço</div>
                    </div>

                    <div class="navigation">
                        <button type="button" class="btn btn-back" onclick="prevStep()">
                            <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-next" onclick="nextStep()">
                            Continuar
                            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ETAPA 4: DETALHES -->
            <div class="form-section" data-step="4" data-name="Detalhes">
                <div class="card">
                    <div class="section-header">
                        <div class="section-icon float-animation">
                            <svg viewBox="0 0 24 24"><path d="M9 18h6M10 22h4"/><path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14"/></svg>
                        </div>
                        <h2>Diferenciais e Público</h2>
                        <p>Quanto mais informações, melhor sua IA vai performar nas conversas.</p>
                    </div>

                    <div class="form-group">
                        <label>Principal diferencial da empresa<span class="required">*</span></label>
                        <p class="hint">O que torna vocês únicos? Ex: Única empresa com certificação X, 10 anos de experiência, metodologia própria...</p>
                        <textarea name="diferencial" required placeholder="Ex: Somos a única plataforma de IA SDR que integra com qualquer CRM em menos de 5 minutos..."></textarea>
                        <div class="error-message">Informe seu diferencial</div>
                    </div>

                    <div class="form-group">
                        <label>Quais resultados vocês entregam ao cliente?<span class="required">*</span></label>
                        <p class="hint">Use números! Ex: Reduzimos 30% dos custos operacionais, Aumentamos em 50% as reuniões agendadas...</p>
                        <textarea name="resultados" required placeholder="Ex: Nossos clientes aumentam em média 40% a taxa de conversão de leads em reuniões no primeiro mês..."></textarea>
                        <div class="error-message">Descreva os resultados</div>
                    </div>

                    <div class="form-group">
                        <label>Qual seu público-alvo?<span class="required">*</span></label>
                        <p class="hint">Ex: CEOs de empresas de tecnologia, Diretores comerciais de indústrias, Donos de e-commerce...</p>
                        <textarea name="publico_alvo" required placeholder="Ex: CEOs e diretores de vendas de empresas B2B com faturamento acima de R$ 1 milhão/ano..."></textarea>
                        <div class="error-message">Defina seu público-alvo</div>
                    </div>

                    <div class="form-group">
                        <label>Principais dores do seu cliente<span class="required">*</span></label>
                        <p class="hint">Quais problemas seus clientes enfrentam que você resolve?</p>
                        <textarea name="dores_cliente" required placeholder="Ex: Gastam muito tempo qualificando leads ruins, SDRs têm alto custo e baixa produtividade, Perdem oportunidades por demora no primeiro contato..."></textarea>
                        <div class="error-message">Descreva as dores do cliente</div>
                    </div>

                    <div class="navigation">
                        <button type="button" class="btn btn-back" onclick="prevStep()">
                            <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-next" onclick="nextStep()">
                            Continuar
                            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ETAPA 5: ROTEIRO -->
            <div class="form-section" data-step="5" data-name="Roteiro">
                <div class="card">
                    <div class="section-header">
                        <div class="section-icon float-animation">
                            <svg viewBox="0 0 24 24"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/></svg>
                        </div>
                        <h2>Roteiro e Materiais</h2>
                        <p>Defina como a IA deve conversar e anexe materiais de apoio.</p>
                    </div>

                    <div class="form-group">
                        <label>Como a IA deve se apresentar?<span class="required">*</span></label>
                        <p class="hint">Escreva a frase de abertura ideal. Ex: "Oi [nome], aqui é a Grazi da SalesDever, tudo bem?"</p>
                        <textarea name="apresentacao" required placeholder="Ex: Oi [nome], aqui é a Ana da [Empresa]! Vi que você demonstrou interesse na nossa solução, tá podendo falar um minutinho?"></textarea>
                        <div class="error-message">Defina a apresentação</div>
                    </div>

                    <div class="form-group">
                        <label>O que a IA deve fazer no final da conversa?<span class="required">*</span></label>
                        <p class="hint">Ex: Agendar uma demonstração, Transferir para um vendedor, Enviar proposta...</p>
                        <textarea name="final_conversa" required placeholder="Ex: Se o lead estiver qualificado, agendar uma demonstração de 30 minutos. Se não estiver no momento, agendar um follow-up para daqui 15 dias..."></textarea>
                        <div class="error-message">Descreva o que fazer no final</div>
                    </div>

                    <div class="form-group">
                        <label>Roteiro/Script de atendimento</label>
                        <p class="hint">Suba documentos com seu playbook de vendas, scripts ou roteiros de qualificação.</p>
                        <div class="file-upload-area" onclick="document.getElementById('file_roteiro').click()" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event, 'roteiro')">
                            <input type="file" id="file_roteiro" name="roteiro_files" multiple accept=".pdf,.doc,.docx,.txt,.pptx" onchange="handleFileSelect(event, 'roteiro')">
                            <span class="upload-icon">
                                <svg viewBox="0 0 24 24"><path d="M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"/></svg>
                            </span>
                            <span class="upload-text">Clique ou arraste arquivos aqui</span>
                            <span class="upload-hint">PDF, Word, TXT ou PowerPoint - Máx. 10MB por arquivo</span>
                        </div>
                        <div class="uploaded-files-list" id="files_roteiro"></div>
                    </div>

                    <div class="form-group">
                        <label>Gravação de ligações na prática</label>
                        <p class="hint">Suba áudios de ligações reais para a IA aprender o tom e estilo ideal.</p>
                        <div class="file-upload-area" onclick="document.getElementById('file_gravacoes').click()" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event, 'gravacoes')">
                            <input type="file" id="file_gravacoes" name="gravacoes_files" multiple accept=".mp3,.wav,.m4a,.ogg" onchange="handleFileSelect(event, 'gravacoes')">
                            <span class="upload-icon">
                                <svg viewBox="0 0 24 24"><path d="M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"/><path d="M19 10v2a7 7 0 0 1-14 0v-2"/><line x1="12" y1="19" x2="12" y2="23"/><line x1="8" y1="23" x2="16" y2="23"/></svg>
                            </span>
                            <span class="upload-text">Clique ou arraste áudios aqui</span>
                            <span class="upload-hint">MP3, WAV, M4A ou OGG - Máx. 50MB por arquivo</span>
                        </div>
                        <div class="uploaded-files-list" id="files_gravacoes"></div>
                    </div>

                    <div class="form-group">
                        <label>Principais objeções e como contorná-las</label>
                        <p class="hint">Suba documentos com as objeções mais comuns e como a IA deve responder.</p>
                        <div class="file-upload-area" onclick="document.getElementById('file_objecoes').click()" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event, 'objecoes')">
                            <input type="file" id="file_objecoes" name="objecoes_files" multiple accept=".pdf,.doc,.docx,.txt,.pptx" onchange="handleFileSelect(event, 'objecoes')">
                            <span class="upload-icon">
                                <svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
                            </span>
                            <span class="upload-text">Clique ou arraste arquivos aqui</span>
                            <span class="upload-hint">PDF, Word, TXT ou PowerPoint - Máx. 10MB por arquivo</span>
                        </div>
                        <div class="uploaded-files-list" id="files_objecoes"></div>
                    </div>

                    <div class="navigation">
                        <button type="button" class="btn btn-back" onclick="prevStep()">
                            <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-next" onclick="nextStep()">
                            Continuar
                            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>
            <!-- ETAPA 6: EMPRESA & CRM -->
            <div class="form-section" data-step="6" data-name="Empresa & CRM">
                <div class="card">
                    <div class="section-header">
                        <div class="section-icon float-animation">
                            <svg viewBox="0 0 24 24"><rect x="4" y="2" width="16" height="20" rx="2" ry="2"/><path d="M9 22v-4h6v4M8 6h.01M16 6h.01M12 6h.01M12 10h.01M12 14h.01M16 10h.01M16 14h.01M8 10h.01M8 14h.01"/></svg>
                        </div>
                        <h2>Cultura e Integração</h2>
                        <p>Valores da empresa e como vamos integrar com seu sistema.</p>
                    </div>

                    <div class="form-group">
                        <label>Missão da empresa<span class="required">*</span></label>
                        <p class="hint">Por que sua empresa existe? Qual impacto ela quer gerar?</p>
                        <textarea name="missao" required placeholder="Ex: Democratizar o acesso à tecnologia de vendas para que qualquer empresa possa competir com grandes corporações..."></textarea>
                        <div class="error-message">Informe a missão</div>
                    </div>

                    <div class="form-group">
                        <label>Valores principais<span class="required">*</span></label>
                        <p class="hint">Liste os 3-5 valores que guiam sua empresa.</p>
                        <textarea name="valores" required placeholder="Ex: Transparência, Inovação, Foco no cliente, Resultados acima de promessas..."></textarea>
                        <div class="error-message">Informe os valores</div>
                    </div>

                    <div class="form-group">
                        <label>O que a IA deve fazer para a ligação ser considerada bem sucedida?<span class="required">*</span></label>
                        <p class="hint">Defina os critérios de sucesso. Ex: Lead qualificado + reunião agendada.</p>
                        <textarea name="criterio_sucesso" required placeholder="Ex: Confirmar que o lead tem poder de decisão, orçamento disponível e interesse real. Se sim, agendar uma demonstração..."></textarea>
                        <div class="error-message">Defina os critérios de sucesso</div>
                    </div>

                    <div class="form-group">
                        <label>Quais informações você quer no resumo da ligação?<span class="required">*</span></label>
                        <p class="hint">Ex: Nome, cargo, empresa, principal dor, próximos passos...</p>
                        <textarea name="info_resumo" required placeholder="Ex: Nome do lead, empresa, cargo, principal dor identificada, nível de interesse (1-10), objeções levantadas, próximos passos definidos..."></textarea>
                        <div class="error-message">Informe as informações desejadas</div>
                    </div>

                    <div class="form-group">
                        <label>Utilizará nosso CRM integrado?<span class="required">*</span></label>
                        <div class="option-group">
                            <div class="option-item" onclick="selectOption(this, 'crm')">
                                <input type="radio" name="usa_crm" value="sim" required>
                                <div class="option-content">
                                    <label>Sim, quero usar o CRM da SalesDever</label>
                                    <div class="sub-input">
                                        <input type="text" name="crm_emails" placeholder="E-mails dos usuários (separados por vírgula)">
                                    </div>
                                </div>
                            </div>
                            <div class="option-item" onclick="selectOption(this, 'crm')">
                                <input type="radio" name="usa_crm" value="nao">
                                <div class="option-content">
                                    <label>Não, quero integrar com meu CRM atual</label>
                                    <div class="sub-input">
                                        <input type="text" name="crm_login" placeholder="Login de acesso ao seu CRM" style="margin-bottom: 10px;">
                                        <input type="password" name="crm_senha" placeholder="Senha de acesso">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="error-message">Selecione uma opção</div>
                    </div>

                    <div class="form-group">
                        <label>Quais informações enviar para o CRM?</label>
                        <div class="checkbox-grid">
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="info_crm[]" value="resumo">
                                <label>Resumo da ligação</label>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="info_crm[]" value="transcricao">
                                <label>Transcrição completa</label>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="info_crm[]" value="audio">
                                <label>Áudio da ligação</label>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="info_crm[]" value="qualificacao">
                                <label>Score de qualificação</label>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="info_crm[]" value="agendamento">
                                <label>Data do agendamento</label>
                            </div>
                            <div class="checkbox-item" onclick="toggleCheckbox(this)">
                                <input type="checkbox" name="info_crm[]" value="objecoes">
                                <label>Objeções identificadas</label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label>Caso a IA agende, qual etapa do funil devemos mover o cliente?</label>
                        <p class="hint">Suba uma imagem/print do seu funil mostrando a etapa desejada.</p>
                        <div class="file-upload-area" onclick="document.getElementById('file_funil').click()" ondragover="handleDragOver(event)" ondragleave="handleDragLeave(event)" ondrop="handleDrop(event, 'funil')">
                            <input type="file" id="file_funil" name="funil_file" accept=".png,.jpg,.jpeg,.webp" onchange="handleImageSelect(event, 'funil')">
                            <span class="upload-icon">
                                <svg viewBox="0 0 24 24"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/></svg>
                            </span>
                            <span class="upload-text">Clique ou arraste a imagem aqui</span>
                            <span class="upload-hint">PNG, JPG ou WEBP - Máx. 5MB</span>
                        </div>
                        <div class="image-preview-area" id="preview_funil"></div>
                    </div>

                    <div class="form-group">
                        <label>Por qual canal você recebe seus leads?<span class="required">*</span></label>
                        <div class="option-group">
                            <div class="option-item" onclick="selectOption(this, 'canal')">
                                <input type="radio" name="canal_leads" value="whatsapp" required>
                                <div class="option-content">
                                    <label>WhatsApp</label>
                                </div>
                            </div>
                            <div class="option-item" onclick="selectOption(this, 'canal')">
                                <input type="radio" name="canal_leads" value="formulario_meta">
                                <div class="option-content">
                                    <label>Formulário Nativo do Meta Ads</label>
                                </div>
                            </div>
                            <div class="option-item" onclick="selectOption(this, 'canal')">
                                <input type="radio" name="canal_leads" value="formulario_site">
                                <div class="option-content">
                                    <label>Formulário no Site / Landing Page</label>
                                </div>
                            </div>
                            <div class="option-item" onclick="selectOption(this, 'canal')">
                                <input type="radio" name="canal_leads" value="outro_canal">
                                <div class="option-content">
                                    <label>Outro</label>
                                    <div class="sub-input">
                                        <input type="text" name="canal_outro" placeholder="Especifique o canal">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="error-message">Selecione o canal</div>
                    </div>

                    <div class="navigation">
                        <button type="button" class="btn btn-back" onclick="prevStep()">
                            <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-next" onclick="nextStep()">
                            Continuar
                            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ETAPA 7: CALENDÁRIO -->
            <div class="form-section" data-step="7" data-name="Calendário">
                <div class="card">
                    <div class="section-header">
                        <div class="section-icon float-animation">
                            <svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg>
                        </div>
                        <h2>Agendamentos e Métricas</h2>
                        <p>Configure como a IA vai agendar reuniões e defina suas expectativas.</p>
                    </div>

                    <div class="form-group">
                        <label>A IA vai agendar reuniões?<span class="required">*</span></label>
                        <div class="option-group">
                            <div class="option-item" onclick="selectOption(this, 'agenda'); toggleCalendarFields(true)">
                                <input type="radio" name="agenda_reunioes" value="sim" required>
                                <div class="option-content">
                                    <label>Sim, a IA vai agendar reuniões</label>
                                </div>
                            </div>
                            <div class="option-item" onclick="selectOption(this, 'agenda'); toggleCalendarFields(false)">
                                <input type="radio" name="agenda_reunioes" value="nao">
                                <div class="option-content">
                                    <label>Não, apenas qualifica e repassa</label>
                                </div>
                            </div>
                        </div>
                        <div class="error-message">Selecione uma opção</div>
                    </div>

                    <div id="calendarFields" style="display: none;">
                        <div class="form-group">
                            <label>Título da reunião<span class="required">*</span></label>
                            <p class="hint">Como a reunião aparecerá na agenda. Ex: "Demonstração SalesDever - [Nome do Lead]"</p>
                            <input type="text" name="titulo_reuniao" placeholder="Ex: Demonstração - [Nome do Lead]">
                            <div class="error-message">Informe o título da reunião</div>
                        </div>

                        <div class="form-group">
                            <label>Tempo de duração<span class="required">*</span></label>
                            <p class="hint">Quanto tempo dura uma reunião típica?</p>
                            <input type="text" name="duracao_reuniao" placeholder="Ex: 30 minutos">
                            <div class="error-message">Informe a duração</div>
                        </div>

                        <div class="form-group">
                            <label>E-mail de quem receberá os agendamentos<span class="required">*</span></label>
                            <p class="hint">A agenda dessa pessoa será usada para verificar disponibilidade.</p>
                            <input type="email" name="email_agenda" placeholder="Ex: vendas@suaempresa.com.br">
                            <div class="error-message">Informe o e-mail</div>
                        </div>
                    </div>

                    <div class="form-group" style="margin-top: 30px; padding-top: 30px; border-top: 1px solid var(--border-color);">
                        <label>Quais métricas de desempenho você espera para considerar o trabalho bem sucedido?<span class="required">*</span></label>
                        <p class="hint">Ex: 50 agendamentos por mês, Taxa de conversão de 15%, 200 leads qualificados...</p>
                        <textarea name="metricas_esperadas" required placeholder="Ex: Espero que a IA consiga agendar pelo menos 30 demonstrações por mês, com uma taxa de comparecimento de 70%..."></textarea>
                        <div class="error-message">Defina suas expectativas</div>
                    </div>

                    <div class="navigation">
                        <button type="button" class="btn btn-back" onclick="prevStep()">
                            <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-submit pulse-glow" onclick="submitForm()">
                            Finalizar e Agendar Onboarding
                            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- STEP 8: AGENDAMENTO -->
            <div class="form-step" data-step="8" data-name="Agendamento">
                <div class="form-content">
                    <div class="card scheduling-card">
                        <div class="scheduling-header">
                            <div class="scheduling-icon">
                                <svg viewBox="0 0 24 24" width="32" height="32"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="1.5" fill="none"/><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="1.5"/><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="1.5"/><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="1.5"/></svg>
                            </div>
                            <h2 class="scheduling-title">Agende seu Onboarding</h2>
                            <p class="scheduling-subtitle">Escolha o melhor horário para nossa call de alinhamento e ativação da sua IA.</p>
                        </div>

                        <div class="scheduler-container">
                            <!-- Left Panel - Event Info -->
                            <div class="scheduler-info">
                                <div class="scheduler-logo">
                                    <svg viewBox="0 0 24 24"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                                </div>
                                <div class="scheduler-event-title">Apresentação:<br>SalesDever (IA)</div>
                                <div class="scheduler-meta">
                                    <div class="scheduler-duration">
                                        <svg viewBox="0 0 24 24"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                                        <span>60 Minutos</span>
                                    </div>
                                    <div class="scheduler-date-display" id="schedulerSelectedDate">
                                        <svg viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="1.5" fill="none"/><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="1.5"/><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="1.5"/><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="1.5"/></svg>
                                        <span>Selecione uma data</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Center Panel - Calendar -->
                            <div class="scheduler-main">
                                <div class="scheduler-section-title">Selecione Data e Horário</div>
                                <div class="calendar-nav">
                                    <button type="button" class="calendar-nav-btn" onclick="changeMonth(-1)">
                                        <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                                    </button>
                                    <span class="calendar-month" id="currentMonth">Janeiro 2026</span>
                                    <button type="button" class="calendar-nav-btn" onclick="changeMonth(1)">
                                        <svg viewBox="0 0 24 24"><path d="M9 18l6-6-6-6" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                                    </button>
                                </div>
                                <div class="calendar-weekdays">
                                    <span>Dom</span><span>Seg</span><span>Ter</span><span>Qua</span><span>Qui</span><span>Sex</span><span>Sáb</span>
                                </div>
                                <div class="calendar-days" id="calendarDays"></div>
                                <div class="calendar-timezone">
                                    <svg viewBox="0 0 24 24" width="16" height="16"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><line x1="2" y1="12" x2="22" y2="12" stroke="currentColor" stroke-width="1.5"/><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                                    <div class="timezone-text">
                                        <span>Fuso horário</span>
                                        <strong>GMT-03:00 America/Sao_Paulo (GMT-3)</strong>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Right Panel - Time Slots -->
                            <div class="scheduler-times" id="timeslotsGrid">
                                <div class="times-placeholder">
                                    <svg viewBox="0 0 24 24" width="32" height="32"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                                    <p>Selecione uma data<br>para ver os horários</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="navigation">
                        <button type="button" class="btn btn-back" onclick="prevStep()">
                            <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-submit pulse-glow" id="confirmScheduleBtn" onclick="confirmSchedule()" disabled>
                            Confirmar Agendamento
                            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- STEP 9: INDICAÇÕES -->
            <div class="form-step" data-step="9" data-name="Concluído">
                <div class="form-content">
                    <!-- Card de Parabéns - COMPACTO -->
                    <div class="card congratulations-card">
                        <div class="congrats-icon">
                            <svg viewBox="0 0 24 24" width="24" height="24">
                                <polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" stroke="var(--success)" stroke-width="1.5" fill="none"/>
                            </svg>
                        </div>
                        <h2 class="congrats-title">Parabéns pelo Agendamento!</h2>
                        <p class="congrats-text">Nosso time já está criando sua IA SDR personalizada. Em breve você terá uma assistente trabalhando 24/7!</p>
                    </div>

                    <!-- Card de Indicações - NOVO DESIGN -->
                    <div class="card referral-program-card">
                        <div class="referral-hero-section">
                            <p class="referral-main-question">Quer ganhar <span class="counter-prefix-inline">+</span><span class="animated-number-inline" id="animatedCounter">0</span><span class="counter-suffix-inline"> minutos</span> extras no seu primeiro mês?</p>
                        </div>

                        <p class="referral-description-text">
                            Indique <span class="highlight-green">10 contatos</span> de empresários que nossa solução faria sentido e ganhe esses minutos extras automaticamente!
                        </p>

                        <!-- Card de Comissão -->
                        <div class="commission-highlight">
                            <div class="commission-icon">
                                <svg viewBox="0 0 24 24" width="48" height="48" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M12 2v20"/>
                                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                </svg>
                            </div>
                            <div class="commission-content">
                                <p class="commission-label">E se fechar um negócio pela sua indicação:<br>Ganhe até</p>
                                <p class="commission-value">R$ 2.000</p>
                            </div>
                        </div>

                        <div class="referral-question">
                            <label>Você gostaria de participar?</label>
                            <div class="referral-options">
                                <div class="referral-option selected" onclick="selectReferralOption(this, true)">
                                    <input type="radio" name="participar_indicacoes" value="sim" checked>
                                    <span>Sim, quero ganhar +200 minutos extras!</span>
                                </div>
                                <div class="referral-option" onclick="selectReferralOption(this, false)">
                                    <input type="radio" name="participar_indicacoes" value="nao">
                                    <span>Agora não, obrigado</span>
                                </div>
                            </div>
                        </div>

                        <div id="referralFieldsContainer">
                            <div class="referral-inputs-list" id="referralInputsList">
                                <div class="referral-input-row required" data-index="1">
                                    <span class="input-number">1</span>
                                    <input type="text" name="indicacao_nome_1" placeholder="Nome" required>
                                    <input type="tel" name="indicacao_numero_1" placeholder="Número" required>
                                </div>
                                <div class="referral-input-row required" data-index="2">
                                    <span class="input-number">2</span>
                                    <input type="text" name="indicacao_nome_2" placeholder="Nome" required>
                                    <input type="tel" name="indicacao_numero_2" placeholder="Número" required>
                                </div>
                                <div class="referral-input-row required" data-index="3">
                                    <span class="input-number">3</span>
                                    <input type="text" name="indicacao_nome_3" placeholder="Nome" required>
                                    <input type="tel" name="indicacao_numero_3" placeholder="Número" required>
                                </div>
                                <div class="referral-input-row required" data-index="4">
                                    <span class="input-number">4</span>
                                    <input type="text" name="indicacao_nome_4" placeholder="Nome" required>
                                    <input type="tel" name="indicacao_numero_4" placeholder="Número" required>
                                </div>
                                <div class="referral-input-row required" data-index="5">
                                    <span class="input-number">5</span>
                                    <input type="text" name="indicacao_nome_5" placeholder="Nome" required>
                                    <input type="tel" name="indicacao_numero_5" placeholder="Número" required>
                                </div>
                                <div class="referral-input-row required" data-index="6">
                                    <span class="input-number">6</span>
                                    <input type="text" name="indicacao_nome_6" placeholder="Nome" required>
                                    <input type="tel" name="indicacao_numero_6" placeholder="Número" required>
                                </div>
                                <div class="referral-input-row required" data-index="7">
                                    <span class="input-number">7</span>
                                    <input type="text" name="indicacao_nome_7" placeholder="Nome" required>
                                    <input type="tel" name="indicacao_numero_7" placeholder="Número" required>
                                </div>
                                <div class="referral-input-row required" data-index="8">
                                    <span class="input-number">8</span>
                                    <input type="text" name="indicacao_nome_8" placeholder="Nome" required>
                                    <input type="tel" name="indicacao_numero_8" placeholder="Número" required>
                                </div>
                                <div class="referral-input-row required" data-index="9">
                                    <span class="input-number">9</span>
                                    <input type="text" name="indicacao_nome_9" placeholder="Nome" required>
                                    <input type="tel" name="indicacao_numero_9" placeholder="Número" required>
                                </div>
                                <div class="referral-input-row required" data-index="10">
                                    <span class="input-number">10</span>
                                    <input type="text" name="indicacao_nome_10" placeholder="Nome" required>
                                    <input type="tel" name="indicacao_numero_10" placeholder="Número" required>
                                </div>
                                <div class="referral-input-row extra" data-index="11">
                                    <span class="input-number extra">11</span>
                                    <input type="text" name="indicacao_nome_11" placeholder="Nome">
                                    <input type="tel" name="indicacao_numero_11" placeholder="Número">
                                </div>
                            </div>
                            <button type="button" class="add-referral-btn" onclick="addReferralField()">
                                <svg viewBox="0 0 24 24" width="18" height="18"><line x1="12" y1="5" x2="12" y2="19" stroke="currentColor" stroke-width="2"/><line x1="5" y1="12" x2="19" y2="12" stroke="currentColor" stroke-width="2"/></svg>
                                Adicionar mais uma indicação
                            </button>
                            <p class="referral-bonus-hint">
                                <svg viewBox="0 0 24 24" width="18" height="18" fill="none" stroke="currentColor" stroke-width="1.5" style="display: inline; margin-right: 8px; vertical-align: middle;">
                                    <path d="M12 2v20"/>
                                    <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                                </svg>
                                Cada indicação extra aumenta sua chance de ganhar R$ 2.000!
                            </p>
                        </div>
                    </div>

                    <div class="navigation">
                        <button type="button" class="btn btn-back" onclick="prevStep()">
                            <svg viewBox="0 0 24 24"><path d="M19 12H5M12 19l-7-7 7-7"/></svg>
                            Voltar
                        </button>
                        <button type="button" class="btn btn-submit btn-green pulse-glow" onclick="submitReferrals()">
                            Enviar e Finalizar
                            <svg viewBox="0 0 24 24"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>

            <!-- FINAL SUCCESS -->
            <div class="form-step" data-step="10" data-name="Concluído">
                <div class="final-success-container">
                    <!-- Animated Background Elements -->
                    <div class="success-particles"></div>
                    
                    <!-- Main Success Card -->
                    <div class="final-success-card">
                        <div class="success-badge-top">
                            <svg viewBox="0 0 24 24" width="16" height="16"><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2" fill="none"/><polyline points="22 4 12 14.01 9 11.01" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                            Onboarding Concluído
                        </div>
                        
                        <div class="success-icon-large">
                            <div class="success-icon-ring"></div>
                            <div class="success-icon-ring ring-2"></div>
                            <div class="success-icon-inner">
                                <svg viewBox="0 0 24 24" width="48" height="48">
                                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round"/>
                                    <polyline points="22 4 12 14.01 9 11.01" stroke="currentColor" stroke-width="2" fill="none" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                        </div>
                        
                        <h2 class="final-success-title">Tudo Pronto!</h2>
                        <p class="final-success-subtitle">Seu onboarding foi concluído com sucesso</p>
                        
                        <!-- Schedule Info Card -->
                        <div class="schedule-confirmation-card">
                            <div class="schedule-conf-header">
                                <svg viewBox="0 0 24 24" width="20" height="20"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="1.5" fill="none"/><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="1.5"/><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="1.5"/><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="1.5"/></svg>
                                Reunião Agendada
                            </div>
                            <div class="schedule-conf-details">
                                <div class="schedule-conf-item">
                                    <span class="schedule-conf-icon">📅</span>
                                    <span class="schedule-conf-value" id="scheduledDateTime">--</span>
                                </div>
                                <div class="schedule-conf-item">
                                    <span class="schedule-conf-icon">📧</span>
                                    <span class="schedule-conf-value" id="confirmedEmail">--</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Next Steps -->
                        <div class="next-steps-section">
                            <h3 class="next-steps-title">Próximos Passos</h3>
                            <div class="next-steps-list">
                                <div class="next-step-item">
                                    <div class="next-step-number">1</div>
                                    <div class="next-step-text">
                                        <strong>Confirme sua presença</strong>
                                        <span>Verifique seu e-mail e aceite o convite do Google Agenda</span>
                                    </div>
                                </div>
                                <div class="next-step-item">
                                    <div class="next-step-number">2</div>
                                    <div class="next-step-text">
                                        <strong>Aguarde nosso contato</strong>
                                        <span>Nossa equipe entrará em contato antes da reunião</span>
                                    </div>
                                </div>
                                <div class="next-step-item">
                                    <div class="next-step-number">3</div>
                                    <div class="next-step-text">
                                        <strong>Prepare suas dúvidas</strong>
                                        <span>Anote suas perguntas para a reunião de kick-off</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <p class="final-note">
                            <svg viewBox="0 0 24 24" width="18" height="18"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                            Enviamos um e-mail de confirmação. Nos vemos em breve! 👋
                        </p>
                    </div>
                </div>
            </div>
        </form>
    </div>

    <!-- CONFIRMATION POPUP -->
    <div class="popup-overlay" id="confirmPopup">
        <div class="popup-content card-glow">
            <button type="button" class="popup-close" onclick="closePopup()">
                <svg viewBox="0 0 24 24" width="20" height="20"><line x1="18" y1="6" x2="6" y2="18" stroke="currentColor" stroke-width="2"/><line x1="6" y1="6" x2="18" y2="18" stroke="currentColor" stroke-width="2"/></svg>
            </button>
            <div class="popup-icon">📅</div>
            <h3 class="popup-title">Confirmar Agendamento</h3>
            <div class="popup-schedule-info">
                <div class="popup-schedule-item">
                    <svg viewBox="0 0 24 24" width="18" height="18"><rect x="3" y="4" width="18" height="18" rx="2" ry="2" stroke="currentColor" stroke-width="1.5" fill="none"/><line x1="16" y1="2" x2="16" y2="6" stroke="currentColor" stroke-width="1.5"/><line x1="8" y1="2" x2="8" y2="6" stroke="currentColor" stroke-width="1.5"/><line x1="3" y1="10" x2="21" y2="10" stroke="currentColor" stroke-width="1.5"/></svg>
                    <span id="popupDate">--</span>
                </div>
                <div class="popup-schedule-item">
                    <svg viewBox="0 0 24 24" width="18" height="18"><circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="1.5" fill="none"/><polyline points="12 6 12 12 16 14" stroke="currentColor" stroke-width="1.5" fill="none"/></svg>
                    <span id="popupTime">--</span>
                </div>
            </div>
            <div class="popup-email-form">
                <label>Informe seu e-mail do Google Agenda:</label>
                <input type="email" id="googleCalendarEmail" placeholder="seu@gmail.com" required>
                <p class="popup-hint">Enviaremos o convite para este e-mail</p>
            </div>
            <div class="popup-actions">
                <button type="button" class="btn btn-back" onclick="closePopup()">Cancelar</button>
                <button type="button" class="btn btn-submit" onclick="finalConfirmSchedule()">
                    <svg viewBox="0 0 24 24" width="18" height="18"><polyline points="20 6 9 17 4 12" stroke="currentColor" stroke-width="2" fill="none"/></svg>
                    Confirmar Agendamento
                </button>
            </div>
        </div>
    </div>

    <script>
        // ========== GLOBAL STATE ==========
        let currentStep = 1;
        const totalSteps = 10;
        let selectedDate = null;
        let selectedTime = null;
        let currentMonth = new Date();
        let referralCount = 1;
        let clientEmail = null; // Store logged-in user email
        let formData = {};
        let fileData = { apresentacao: null, roteiro: null };

        // ========== CONFETTI SYSTEM ==========
        class ConfettiSystem {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.particles = [];
                this.animating = false;
                this.resize();
                window.addEventListener('resize', () => this.resize());
            }

            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }

            createParticle(x, y) {
                const colors = ['#A594FF', '#667eea', '#22c55e', '#ff6b6b', '#ffd700', '#00d4ff', '#ff69b4'];
                return {
                    x: x || Math.random() * this.canvas.width,
                    y: y || -20,
                    vx: (Math.random() - 0.5) * 15,
                    vy: Math.random() * 3 + 2,
                    color: colors[Math.floor(Math.random() * colors.length)],
                    size: Math.random() * 8 + 4,
                    rotation: Math.random() * 360,
                    rotationSpeed: (Math.random() - 0.5) * 10,
                    shape: Math.floor(Math.random() * 3),
                    gravity: 0.15,
                    drag: 0.99,
                    opacity: 1
                };
            }

            burst(x, y, count = 100) {
                for (let i = 0; i < count; i++) {
                    const p = this.createParticle(x, y);
                    p.vx = (Math.random() - 0.5) * 25;
                    p.vy = (Math.random() - 0.5) * 25 - 10;
                    this.particles.push(p);
                }
                if (!this.animating) this.animate();
            }

            rain(duration = 5000) {
                const startTime = Date.now();
                const interval = setInterval(() => {
                    if (Date.now() - startTime > duration) {
                        clearInterval(interval);
                        return;
                    }
                    for (let i = 0; i < 5; i++) {
                        this.particles.push(this.createParticle());
                    }
                }, 50);
                if (!this.animating) this.animate();
            }

            animate() {
                this.animating = true;
                this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);

                this.particles = this.particles.filter(p => {
                    p.vy += p.gravity;
                    p.vx *= p.drag;
                    p.x += p.vx;
                    p.y += p.vy;
                    p.rotation += p.rotationSpeed;
                    p.opacity -= 0.005;

                    if (p.y > this.canvas.height + 50 || p.opacity <= 0) return false;

                    this.ctx.save();
                    this.ctx.translate(p.x, p.y);
                    this.ctx.rotate(p.rotation * Math.PI / 180);
                    this.ctx.globalAlpha = p.opacity;
                    this.ctx.fillStyle = p.color;

                    if (p.shape === 0) {
                        this.ctx.fillRect(-p.size/2, -p.size/2, p.size, p.size);
                    } else if (p.shape === 1) {
                        this.ctx.beginPath();
                        this.ctx.arc(0, 0, p.size/2, 0, Math.PI * 2);
                        this.ctx.fill();
                    } else {
                        this.ctx.beginPath();
                        this.ctx.moveTo(0, -p.size/2);
                        this.ctx.lineTo(p.size/2, p.size/2);
                        this.ctx.lineTo(-p.size/2, p.size/2);
                        this.ctx.closePath();
                        this.ctx.fill();
                    }

                    this.ctx.restore();
                    return true;
                });

                if (this.particles.length > 0) {
                    requestAnimationFrame(() => this.animate());
                } else {
                    this.animating = false;
                }
            }
        }

        // ========== FIREWORKS SYSTEM ==========
        class FireworksSystem {
            constructor(canvas) {
                this.canvas = canvas;
                this.ctx = canvas.getContext('2d');
                this.particles = [];
                this.rockets = [];
                this.animating = false;
                this.resize();
                window.addEventListener('resize', () => this.resize());
            }

            resize() {
                this.canvas.width = window.innerWidth;
                this.canvas.height = window.innerHeight;
            }

            launch(count = 5) {
                for (let i = 0; i < count; i++) {
                    setTimeout(() => {
                        this.rockets.push({
                            x: Math.random() * this.canvas.width * 0.8 + this.canvas.width * 0.1,
                            y: this.canvas.height,
                            vx: (Math.random() - 0.5) * 2,
                            vy: -(Math.random() * 8 + 12),
                            targetY: Math.random() * this.canvas.height * 0.4 + 50,
                            color: `hsl(${Math.random() * 360}, 100%, 60%)`
                        });
                    }, i * 300);
                }
                if (!this.animating) this.animate();
            }

            explode(x, y, color) {
                const particleCount = 80;
                for (let i = 0; i < particleCount; i++) {
                    const angle = (Math.PI * 2 / particleCount) * i + Math.random() * 0.3;
                    const speed = Math.random() * 6 + 3;
                    this.particles.push({
                        x, y,
                        vx: Math.cos(angle) * speed,
                        vy: Math.sin(angle) * speed,
                        color,
                        life: 1,
                        decay: Math.random() * 0.02 + 0.01,
                        size: Math.random() * 3 + 2
                    });
                }
            }

            animate() {
                this.animating = true;
                this.ctx.fillStyle = 'rgba(10, 4, 32, 0.2)';
                this.ctx.fillRect(0, 0, this.canvas.width, this.canvas.height);

                // Update rockets
                this.rockets = this.rockets.filter(r => {
                    r.x += r.vx;
                    r.y += r.vy;
                    r.vy += 0.1;

                    this.ctx.beginPath();
                    this.ctx.arc(r.x, r.y, 3, 0, Math.PI * 2);
                    this.ctx.fillStyle = r.color;
                    this.ctx.fill();

                    if (r.y <= r.targetY || r.vy >= 0) {
                        this.explode(r.x, r.y, r.color);
                        return false;
                    }
                    return true;
                });

                // Update particles
                this.particles = this.particles.filter(p => {
                    p.x += p.vx;
                    p.y += p.vy;
                    p.vy += 0.05;
                    p.vx *= 0.99;
                    p.life -= p.decay;

                    if (p.life <= 0) return false;

                    this.ctx.beginPath();
                    this.ctx.arc(p.x, p.y, p.size * p.life, 0, Math.PI * 2);
                    this.ctx.fillStyle = p.color;
                    this.ctx.globalAlpha = p.life;
                    this.ctx.fill();
                    this.ctx.globalAlpha = 1;

                    return true;
                });

                if (this.rockets.length > 0 || this.particles.length > 0) {
                    requestAnimationFrame(() => this.animate());
                } else {
                    this.animating = false;
                    this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);
                }
            }
        }

        // Initialize systems
        let confetti, fireworks;
        document.addEventListener('DOMContentLoaded', () => {
            confetti = new ConfettiSystem(document.getElementById('confetti-canvas'));
            fireworks = new FireworksSystem(document.getElementById('fireworks-canvas'));
            initCalendar();
            updateProgressBar();
        });

        // ========== EPIC CELEBRATION ==========
        function triggerEpicCelebration() {
            const overlay = document.getElementById('celebrationOverlay');
            const text = document.getElementById('epicText');
            
            overlay.classList.add('active');
            text.classList.add('active');
            
            confetti.burst(window.innerWidth / 2, window.innerHeight / 2, 150);
            confetti.rain(4000);
            
            setTimeout(() => fireworks.launch(8), 500);
            setTimeout(() => fireworks.launch(5), 2000);
            setTimeout(() => fireworks.launch(3), 3500);
            
            // Play celebration sound if available
            try {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                const playTone = (freq, start, dur) => {
                    const osc = audioCtx.createOscillator();
                    const gain = audioCtx.createGain();
                    osc.connect(gain);
                    gain.connect(audioCtx.destination);
                    osc.frequency.value = freq;
                    osc.type = 'sine';
                    gain.gain.setValueAtTime(0.1, audioCtx.currentTime + start);
                    gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + start + dur);
                    osc.start(audioCtx.currentTime + start);
                    osc.stop(audioCtx.currentTime + start + dur);
                };
                [523, 659, 784, 1047].forEach((f, i) => playTone(f, i * 0.15, 0.3));
            } catch(e) {}
            
            setTimeout(() => {
                overlay.classList.remove('active');
                text.classList.remove('active');
            }, 4000);
        }

        // ========== SPARKLE ON CLICK ==========
        document.addEventListener('click', (e) => {
            if (e.target.closest('.btn')) {
                createSparkles(e.clientX, e.clientY);
            }
        });

        function createSparkles(x, y) {
            for (let i = 0; i < 8; i++) {
                const sparkle = document.createElement('div');
                sparkle.className = 'sparkle';
                sparkle.style.left = x + 'px';
                sparkle.style.top = y + 'px';
                sparkle.style.setProperty('--tx', (Math.random() - 0.5) * 100 + 'px');
                sparkle.style.setProperty('--ty', (Math.random() - 0.5) * 100 + 'px');
                document.body.appendChild(sparkle);
                setTimeout(() => sparkle.remove(), 600);
            }
        }

        // ========== PROGRESS BAR ==========
        function updateProgressBar() {
            // Update step indicators
            const indicators = document.querySelectorAll('.step-indicator');
            indicators.forEach((ind, i) => {
                ind.classList.remove('active', 'completed');
                if (i < currentStep - 1) ind.classList.add('completed');
                if (i === currentStep - 1) ind.classList.add('active');
            });
            
            // Update step count text
            const stepCount = document.getElementById('stepCount');
            if (stepCount) stepCount.textContent = `Etapa ${Math.min(currentStep, 8)} de 8`;
            
            // Update step name
            const stepName = document.getElementById('stepName');
            const currentStepEl = document.querySelector(`.form-section[data-step="${currentStep}"], .form-step[data-step="${currentStep}"]`);
            if (stepName && currentStepEl) {
                stepName.textContent = currentStepEl.dataset.name || `Etapa ${currentStep}`;
            }
        }

        // ========== FORM NAVIGATION ==========
        function showStep(step) {
            document.querySelectorAll('.form-section, .form-step').forEach(s => s.classList.remove('active'));
            const targetStep = document.querySelector(`.form-section[data-step="${step}"], .form-step[data-step="${step}"]`);
            if (targetStep) {
                targetStep.classList.add('active');
                targetStep.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
            
            // Handle intro screens visibility
            if (step === 1) {
                // Show intro, hide others
                document.getElementById('introScreen').style.display = 'flex';
                document.getElementById('rulesScreen').style.display = 'none';
                document.getElementById('emailScreen').style.display = 'none';
            } else {
                // Hide all intro screens for other steps
                const introScreen = document.getElementById('introScreen');
                const rulesScreen = document.getElementById('rulesScreen');
                const emailScreen = document.getElementById('emailScreen');
                if (introScreen) introScreen.style.display = 'none';
                if (rulesScreen) rulesScreen.style.display = 'none';
                if (emailScreen) emailScreen.style.display = 'none';
            }
            
            // Expand container for steps 8 and 9 (calendar and referrals)
            const container = document.querySelector('.container');
            if (step === 8 || step === 9) {
                container.classList.add('expanded');
            } else {
                container.classList.remove('expanded');
            }
            
            // Initialize calendar when reaching step 8
            if (step === 8) {
                initCalendar();
            }

            // Start counter animation when reaching step 9
            if (step === 9) {
                // Scroll to top when reaching referrals step
                window.scrollTo({ top: 0, behavior: 'smooth' });
                setTimeout(() => {
                    animateCounter();
                }, 500); // Small delay to let the step load
            }

            updateProgressBar();
        }

        // ========== INTRO SCREEN NAVIGATION ==========
        function showRulesScreen() {
            document.getElementById('introScreen').style.display = 'none';
            document.getElementById('rulesScreen').style.display = 'flex';
            document.getElementById('emailScreen').style.display = 'none';
        }
        
        function showIntroScreen() {
            document.getElementById('introScreen').style.display = 'flex';
            document.getElementById('rulesScreen').style.display = 'none';
            document.getElementById('emailScreen').style.display = 'none';
        }
        
        function showEmailScreen() {
            document.getElementById('introScreen').style.display = 'none';
            document.getElementById('rulesScreen').style.display = 'none';
            document.getElementById('emailScreen').style.display = 'flex';
            document.getElementById('emailInput')?.focus();
        }
        
        function toggleAgreement(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            element.classList.toggle('checked', checkbox.checked);
            
            const btn = document.getElementById('btnContinueRules');
            btn.disabled = !checkbox.checked;
        }
        
        async function startOnboarding() {
            const emailInput = document.getElementById('emailInput');
            const email = emailInput.value.trim();
            const btn = document.querySelector('.btn-start-form');
            const errorElement = emailInput.closest('.email-form').querySelector('.error-message');

            // Validate email format
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!email || !emailRegex.test(email)) {
                emailInput.style.borderColor = 'var(--error)';
                errorElement.textContent = 'Insira um e-mail válido';
                errorElement.style.display = 'block';
                emailInput.focus();
                return;
            }

            // Reset visual state
            emailInput.style.borderColor = '';
            errorElement.style.display = 'none';

            // Show loading state
            const originalBtnContent = btn.innerHTML;
            btn.innerHTML = `
                <span class="loading-spinner"></span>
                <span>Verificando...</span>
            `;
            btn.disabled = true;

            try {
                // Call webhook to validate email
                const response = await fetch('https://sdr.salesdever.io/webhook/recebe-login-onboarding', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        email: email
                    })
                });

                const data = await response.json();

                if (data.status === 'Login Existe') {
                    // Email authorized - proceed to onboarding
                    emailInput.style.borderColor = 'var(--success)';

                    // Store email globally for later use
                    clientEmail = email;

                    // Check for saved progress
                    const savedProgress = loadFormProgress(email);
                    if (savedProgress) {
                        console.log('Progresso anterior encontrado, restaurando...');
                        // Optional: Show confirmation dialog
                        // const proceed = confirm('Encontramos seu progresso anterior. Deseja continuar de onde parou?');
                        // if (proceed) {
                            restoreFormProgress(savedProgress);
                        // } else {
                        //     currentStep = 2;
                        //     showStep(currentStep);
                        // }
                    } else {
                        // No saved progress - start normally
                        currentStep = 2;
                        showStep(currentStep);
                    }
                } else {
                    // Email not authorized
                    emailInput.style.borderColor = 'var(--error)';
                    errorElement.textContent = 'E-mail não encontrado ou não autorizado. Verifique se está correto ou entre em contato conosco.';
                    errorElement.style.display = 'block';
                    emailInput.focus();
                }

            } catch (error) {
                console.error('Erro ao verificar email:', error);
                emailInput.style.borderColor = 'var(--error)';
                errorElement.textContent = 'Erro de conexão. Tente novamente em alguns instantes.';
                errorElement.style.display = 'block';
                emailInput.focus();
            } finally {
                // Restore button state
                btn.innerHTML = originalBtnContent;
                btn.disabled = false;
            }
        }

        function nextStep() {
            if (!validateCurrentStep()) return;

            // Auto-save before changing steps
            saveFormProgress();

            // Trigger celebration when moving from step 7 to 8
            if (currentStep === 7) {
                triggerEpicCelebration();
                setTimeout(() => {
                    currentStep++;
                    showStep(currentStep);
                    saveFormProgress(); // Save again after step change
                }, 2000);
            } else {
                currentStep++;
                showStep(currentStep);
                saveFormProgress(); // Save again after step change
            }
        }

        function prevStep() {
            // Auto-save before changing steps
            saveFormProgress();

            if (currentStep === 2) {
                // From step 2, go back to email screen (step 1)
                currentStep = 1;
                showStep(1);
                showEmailScreen();
            } else if (currentStep > 1) {
                currentStep--;
                showStep(currentStep);
                saveFormProgress(); // Save again after step change
            }
        }

        // ========== VALIDATION ==========
        function validateCurrentStep() {
            const stepEl = document.querySelector(`.form-section[data-step="${currentStep}"], .form-step[data-step="${currentStep}"]`);
            if (!stepEl) return true;
            
            let valid = true;
            const requiredInputs = stepEl.querySelectorAll('input[required], textarea[required], select[required]');
            
            requiredInputs.forEach(input => {
                // Skip validation for inputs inside hidden containers
                const hiddenParent = input.closest('[style*="display: none"], [style*="display:none"]');
                if (hiddenParent) return;
                
                const group = input.closest('.form-group');
                if (!input.value.trim()) {
                    valid = false;
                    if (group) group.classList.add('error');
                    input.classList.add('shake');
                    setTimeout(() => input.classList.remove('shake'), 500);
                } else {
                    if (group) group.classList.remove('error');
                }
            });

            // Check radio groups
            const radioGroups = stepEl.querySelectorAll('.option-group');
            radioGroups.forEach(group => {
                const radios = group.querySelectorAll('input[type="radio"]');
                if (radios.length > 0) {
                    // Check if any radio in the group has required attribute
                    const hasRequired = Array.from(radios).some(r => r.required);
                    if (hasRequired) {
                        // Check if ANY radio in the group is checked (not just the required one)
                        const checked = Array.from(radios).some(r => r.checked);
                        const formGroup = group.closest('.form-group');
                        if (!checked) {
                            valid = false;
                            if (formGroup) formGroup.classList.add('error');
                        } else {
                            if (formGroup) formGroup.classList.remove('error');
                        }
                    }
                }
            });

            if (!valid) {
                const firstError = stepEl.querySelector('.form-group.error');
                if (firstError) firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }

            return valid;
        }

        // ========== INPUT HANDLERS ==========
        function selectOption(element, groupName) {
            const group = element.closest('.option-group');
            group.querySelectorAll('.option-item').forEach(item => item.classList.remove('selected'));
            element.classList.add('selected');
            element.querySelector('input').checked = true;
            element.closest('.form-group')?.classList.remove('error');
            // Auto-save on option selection
            saveFormProgress();
        }

        function toggleCheckbox(element) {
            const checkbox = element.querySelector('input[type="checkbox"]');
            checkbox.checked = !checkbox.checked;
            element.classList.toggle('selected', checkbox.checked);
            // Auto-save on checkbox toggle
            saveFormProgress();
        }

        function toggleCalendarFields(show) {
            const fields = document.getElementById('calendarFields');
            if (fields) {
                fields.style.display = show ? 'block' : 'none';
                fields.querySelectorAll('input').forEach(input => {
                    input.required = show;
                });
            }
        }

        // ========== FILE UPLOAD FUNCTIONS ==========
        const uploadedFiles = {
            roteiro: [],
            gravacoes: [],
            objecoes: [],
            funil: null
        };

        function handleDragOver(event) {
            event.preventDefault();
            event.currentTarget.classList.add('dragover');
        }

        function handleDragLeave(event) {
            event.currentTarget.classList.remove('dragover');
        }

        function handleDrop(event, type) {
            event.preventDefault();
            event.currentTarget.classList.remove('dragover');
            const files = event.dataTransfer.files;
            processFiles(files, type);
        }

        function handleFileSelect(event, type) {
            const files = event.target.files;
            processFiles(files, type);
        }

        function processFiles(files, type) {
            const container = document.getElementById(`files_${type}`);
            if (!container) return;
            
            Array.from(files).forEach(file => {
                if (!uploadedFiles[type]) uploadedFiles[type] = [];
                if (!uploadedFiles[type].find(f => f.name === file.name)) {
                    uploadedFiles[type].push(file);
                    
                    const fileDiv = document.createElement('div');
                    fileDiv.className = 'uploaded-file-item';
                    fileDiv.innerHTML = `
                        <span class="file-name">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"/><polyline points="13 2 13 9 20 9"/></svg>
                            ${file.name}
                        </span>
                        <button type="button" class="remove-file-btn" onclick="removeFile('${type}', '${file.name}', this)">Remover</button>
                    `;
                    container.appendChild(fileDiv);
                }
            });
        }

        function removeFile(type, fileName, button) {
            if (uploadedFiles[type]) {
                uploadedFiles[type] = uploadedFiles[type].filter(f => f.name !== fileName);
            }
            button.closest('.uploaded-file-item').remove();
        }

        function handleImageSelect(event, type) {
            const file = event.target.files[0];
            if (!file) return;

            uploadedFiles[type] = file;
            
            const preview = document.getElementById(`preview_${type}`);
            if (preview) {
                preview.innerHTML = `<img src="${URL.createObjectURL(file)}" alt="Preview">`;
                preview.classList.add('has-image');
            }
        }

        // Input ripple effect and auto-save
        document.querySelectorAll('input, textarea').forEach(input => {
            input.addEventListener('focus', function() {
                this.parentElement?.classList.add('focused');
            });
            input.addEventListener('blur', function() {
                this.parentElement?.classList.remove('focused');
                // Auto-save on blur
                saveFormProgress();
            });
            input.addEventListener('input', function() {
                this.closest('.form-group')?.classList.remove('error');
            });
            input.addEventListener('change', function() {
                // Auto-save on change (for radio/checkbox)
                saveFormProgress();
            });
        });

        // ========== CALENDAR SYSTEM ==========
        function initCalendar() {
            renderCalendar();
        }

        function renderCalendar() {
            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const startDay = firstDay.getDay();
            const totalDays = lastDay.getDate();
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            const monthNames = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                               'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            document.getElementById('currentMonth').textContent = `${monthNames[month]} ${year}`;

            const container = document.getElementById('calendarDays');
            container.innerHTML = '';

            // Empty cells before first day
            for (let i = 0; i < startDay; i++) {
                const empty = document.createElement('div');
                empty.className = 'calendar-day empty';
                container.appendChild(empty);
            }

            // Calcular data mínima: 3 dias após hoje (excluindo fins de semana)
            const minDate = new Date(today);
            minDate.setDate(today.getDate() + 3);

            // Days of the month
            for (let day = 1; day <= totalDays; day++) {
                const dateObj = new Date(year, month, day);
                const dayEl = document.createElement('div');
                dayEl.className = 'calendar-day';
                dayEl.textContent = day;

                const isWeekend = dateObj.getDay() === 0 || dateObj.getDay() === 6; // 0 = Domingo, 6 = Sábado
                const isPast = dateObj < today;
                const isTooSoon = dateObj < minDate; // Antes de 3 dias a partir de hoje

                // Desabilitar se for passado, fim de semana, ou antes de 3 dias
                if (isPast || isWeekend || isTooSoon) {
                    dayEl.classList.add('disabled');
                } else {
                    dayEl.addEventListener('click', () => selectDate(dateObj, dayEl));
                }

                if (selectedDate && dateObj.toDateString() === selectedDate.toDateString()) {
                    dayEl.classList.add('selected');
                }

                container.appendChild(dayEl);
            }
        }

        function changeMonth(delta) {
            currentMonth.setMonth(currentMonth.getMonth() + delta);
            renderCalendar();
        }

        function selectDate(date, element) {
            selectedDate = date;
            selectedTime = null;
            
            document.querySelectorAll('.calendar-day').forEach(d => d.classList.remove('selected'));
            element.classList.add('selected');

            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            const dateText = date.toLocaleDateString('pt-BR', options);
            
            // Update left panel date display
            const schedulerDate = document.getElementById('schedulerSelectedDate');
            if (schedulerDate) {
                schedulerDate.querySelector('span').textContent = dateText;
            }

            renderTimeSlots();
            updateScheduleButton();
        }

        function renderTimeSlots() {
            const container = document.getElementById('timeslotsGrid');
            container.innerHTML = '';

            // Horários limpos de 10:00 às 17:00 (hora em hora)
            const slots = ['10:00', '11:00', '12:00', '13:00', '14:00', '15:00', '16:00', '17:00'];

            slots.forEach(time => {
                const slot = document.createElement('button');
                slot.type = 'button';
                slot.className = 'time-slot';
                slot.textContent = time;

                // Remover simulação de indisponibilidade aleatória
                slot.addEventListener('click', () => selectTimeSlot(time, slot));

                if (selectedTime === time) {
                    slot.classList.add('selected');
                }

                container.appendChild(slot);
            });
        }

        function selectTimeSlot(time, element) {
            selectedTime = time;
            document.querySelectorAll('.time-slot').forEach(t => t.classList.remove('selected'));
            element.classList.add('selected');
            
            // Show popup immediately when time is selected
            showSchedulePopup();
        }

        function showSchedulePopup() {
            if (!selectedDate || !selectedTime) return;

            const monthNames = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                               'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            const weekDays = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
            
            const day = selectedDate.getDate();
            const month = monthNames[selectedDate.getMonth()];
            const year = selectedDate.getFullYear();
            const weekDay = weekDays[selectedDate.getDay()];
            
            document.getElementById('popupDate').textContent = `${weekDay}, ${day} de ${month} de ${year}`;
            document.getElementById('popupTime').textContent = `${selectedTime} (Horário de Brasília)`;
            
            // Pre-fill email if available
            const emailInput = document.querySelector('input[name="email"]');
            if (emailInput && emailInput.value) {
                document.getElementById('googleCalendarEmail').value = emailInput.value;
            }
            
            document.getElementById('confirmPopup').classList.add('active');
            document.getElementById('googleCalendarEmail').focus();
        }

        function updateScheduleButton() {
            const btn = document.getElementById('confirmScheduleBtn');
            if (btn) {
                btn.disabled = !(selectedDate && selectedTime);
            }
        }

        // ========== FILE UPLOAD ==========
        function handleFileUpload(input, type) {
            const file = input.files[0];
            if (!file) return;

            const maxSize = 10 * 1024 * 1024; // 10MB
            if (file.size > maxSize) {
                alert('Arquivo muito grande. Máximo: 10MB');
                input.value = '';
                return;
            }

            const label = input.closest('.file-upload-area').querySelector('.file-name');
            label.textContent = file.name;
            label.style.color = 'var(--success)';

            const reader = new FileReader();
            reader.onload = (e) => {
                fileData[type] = {
                    name: file.name,
                    type: file.type,
                    data: e.target.result.split(',')[1]
                };
            };
            reader.readAsDataURL(file);
        }

        // ========== POPUP ==========
        function confirmSchedule() {
            showSchedulePopup();
        }

        function closePopup() {
            document.getElementById('confirmPopup').classList.remove('active');
        }

        function finalConfirmSchedule() {
            const emailInput = document.getElementById('googleCalendarEmail');
            const email = emailInput.value.trim();
            
            if (!email || !email.includes('@')) {
                emailInput.style.borderColor = 'var(--error)';
                emailInput.focus();
                return;
            }
            
            emailInput.style.borderColor = '';
            closePopup();
            submitScheduling(email);
        }

        // ========== FORM SUBMISSIONS ==========
        // Helper function to convert file to base64
        function fileToBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => {
                    // Remove the data URL prefix to get only base64 content
                    const base64 = reader.result.split(',')[1];
                    resolve(base64);
                };
                reader.onerror = error => reject(error);
            });
        }

        async function collectFormData() {
            const form = document.getElementById('onboardingForm');
            const formData = new FormData(form);

            // Convert files to base64 with content
            const arquivosRoteiro = [];
            if (uploadedFiles.roteiro && uploadedFiles.roteiro.length > 0) {
                for (const file of uploadedFiles.roteiro) {
                    try {
                        const base64Content = await fileToBase64(file);
                        arquivosRoteiro.push({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            content: base64Content,
                            lastModified: file.lastModified
                        });
                    } catch (error) {
                        console.error('Erro ao converter arquivo roteiro:', file.name, error);
                        // Add file info without content if conversion fails
                        arquivosRoteiro.push({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            content: null,
                            error: 'Falha na conversão'
                        });
                    }
                }
            }

            const arquivosGravacoes = [];
            if (uploadedFiles.gravacoes && uploadedFiles.gravacoes.length > 0) {
                for (const file of uploadedFiles.gravacoes) {
                    try {
                        const base64Content = await fileToBase64(file);
                        arquivosGravacoes.push({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            content: base64Content,
                            lastModified: file.lastModified
                        });
                    } catch (error) {
                        console.error('Erro ao converter arquivo gravação:', file.name, error);
                        arquivosGravacoes.push({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            content: null,
                            error: 'Falha na conversão'
                        });
                    }
                }
            }

            const arquivosObjecoes = [];
            if (uploadedFiles.objecoes && uploadedFiles.objecoes.length > 0) {
                for (const file of uploadedFiles.objecoes) {
                    try {
                        const base64Content = await fileToBase64(file);
                        arquivosObjecoes.push({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            content: base64Content,
                            lastModified: file.lastModified
                        });
                    } catch (error) {
                        console.error('Erro ao converter arquivo objeções:', file.name, error);
                        arquivosObjecoes.push({
                            name: file.name,
                            type: file.type,
                            size: file.size,
                            content: null,
                            error: 'Falha na conversão'
                        });
                    }
                }
            }

            let arquivoFunil = null;
            if (uploadedFiles.funil) {
                try {
                    const base64Content = await fileToBase64(uploadedFiles.funil);
                    arquivoFunil = {
                        name: uploadedFiles.funil.name,
                        type: uploadedFiles.funil.type,
                        size: uploadedFiles.funil.size,
                        content: base64Content,
                        lastModified: uploadedFiles.funil.lastModified
                    };
                } catch (error) {
                    console.error('Erro ao converter arquivo funil:', uploadedFiles.funil.name, error);
                    arquivoFunil = {
                        name: uploadedFiles.funil.name,
                        type: uploadedFiles.funil.type,
                        size: uploadedFiles.funil.size,
                        content: null,
                        error: 'Falha na conversão'
                    };
                }
            }

            // Structured data object
            const dados = {
                timestamp: new Date().toISOString(),
                email: clientEmail || formData.get('email'),
                equipe: {
                    tem_socio: formData.get('tem_socio'),
                    socio_telefone: formData.get('socio_telefone') || null,
                    responsavel_tecnico: formData.get('responsavel_tecnico'),
                    tecnico_telefone: formData.get('tecnico_telefone') || null,
                    responsavel_leads: formData.get('responsavel_leads'),
                    agencia_telefone: formData.get('agencia_telefone') || null
                },
                assistente: {
                    nome: formData.get('nome_assistente'),
                    ddd: formData.get('ddd_assistente'),
                    objetivo: formData.get('objetivo_assistente')
                },
                empresa: {
                    segmento: formData.get('segmento'),
                    produto_servico: formData.get('produto_servico'),
                    diferencial: formData.get('diferencial'),
                    resultados: formData.get('resultados'),
                    publico_alvo: formData.get('publico_alvo'),
                    dores_cliente: formData.get('dores_cliente')
                },
                comunicacao: {
                    apresentacao: formData.get('apresentacao'),
                    final_conversa: formData.get('final_conversa')
                },
                cultura: {
                    missao: formData.get('missao'),
                    valores: formData.get('valores'),
                    criterio_sucesso: formData.get('criterio_sucesso'),
                    info_resumo: formData.get('info_resumo')
                },
                crm: {
                    usa_crm: formData.get('usa_crm'),
                    emails: formData.get('crm_emails') || null,
                    login: formData.get('crm_login') || null,
                    senha: formData.get('crm_senha') || null,
                    informacoes_salvar: formData.getAll('info_crm[]')
                },
                agendamento: {
                    agenda_reunioes: formData.get('agenda_reunioes'),
                    titulo_reuniao: formData.get('titulo_reuniao') || null,
                    duracao_reuniao: formData.get('duracao_reuniao') || null,
                    email_agenda: formData.get('email_agenda') || null,
                    metricas_esperadas: formData.get('metricas_esperadas')
                },
                canal_leads: {
                    canal: formData.get('canal_leads'),
                    canal_outro: formData.get('canal_outro') || null
                },
                arquivos: {
                    roteiro: arquivosRoteiro,
                    gravacoes: arquivosGravacoes,
                    objecoes: arquivosObjecoes,
                    funil: arquivoFunil
                },
                source: 'onboarding-epic'
            };

            return dados;
        }

        async function submitForm() {
            if (!validateCurrentStep()) return;

            const btn = document.querySelector('.form-section[data-step="7"] .btn-submit');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<span class="loading"></span> Processando arquivos...';
            btn.disabled = true;

            try {
                // Await the async collectFormData function
                const formDataStructured = await collectFormData();

                // Update button text to show sending
                btn.innerHTML = '<span class="loading"></span> Enviando...';

                const response = await fetch('https://sdr.salesdever.io/webhook/forms-onboarding', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(formDataStructured)
                });

                console.log('Dados do formulário enviados com sucesso!');

                // Store structured data globally for other functions
                formData = formDataStructured;

            } catch (error) {
                console.error('Erro ao enviar formulário:', error);
                // Continue anyway - don't block the user
            }

            // Always trigger celebration and move to scheduling
            btn.innerHTML = originalText;
            btn.disabled = false;
            triggerEpicCelebration();
            setTimeout(() => {
                currentStep = 8;
                showStep(currentStep);
            }, 2000);
        }

        async function submitScheduling(calendarEmail) {
            if (!selectedDate || !selectedTime) return;

            const scheduleData = {
                email: calendarEmail || clientEmail || document.querySelector('input[name="email"]')?.value,
                google_calendar_email: calendarEmail,
                date: selectedDate.toISOString().split('T')[0],
                time: selectedTime,
                datetime: `${selectedDate.toISOString().split('T')[0]}T${selectedTime}:00`,
                timestamp: new Date().toISOString()
            };

            try {
                // Webhook original para forms-agendamento
                await fetch('https://n8n-n8n.hgabnb.easypanel.host/webhook/forms-agendamento', {
                    method: 'POST',
                    mode: 'no-cors',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(scheduleData)
                });
            } catch (error) {
                console.error('Schedule error:', error);
                // Continue anyway
            }

            // Novo webhook para onboarding-agendado
            try {
                const onboardingScheduleData = {
                    email_cliente: clientEmail || scheduleData.email,
                    email_google_agenda: calendarEmail,
                    data_agendamento: selectedDate.toISOString().split('T')[0],
                    horario_agendamento: selectedTime,
                    timestamp: new Date().toISOString()
                };

                await fetch('https://sdr.salesdever.io/webhook/onboarding-agendado', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(onboardingScheduleData)
                });

                console.log('Agendamento salvo com sucesso!');
            } catch (error) {
                console.error('Erro ao salvar agendamento:', error);
                // Continue anyway
            }

            // Update success details
            const options = { weekday: 'long', day: 'numeric', month: 'long' };
            document.getElementById('scheduledDateTime').textContent =
                `${selectedDate.toLocaleDateString('pt-BR', options)} às ${selectedTime}`;
            document.getElementById('confirmedEmail').textContent = calendarEmail || '--';

            // Mini celebration and move to referrals
            confetti.burst(window.innerWidth / 2, 200, 50);
            currentStep = 9;
            showStep(currentStep);
        }

        // ========== REFERRAL SYSTEM ==========
        let referralFieldCount = 11;
        
        function addReferralField() {
            referralFieldCount++;
            const container = document.getElementById('referralInputsList');
            
            const newRow = document.createElement('div');
            newRow.className = 'referral-input-row extra new-field';
            newRow.dataset.index = referralFieldCount;
            newRow.innerHTML = `
                <span class="input-number extra">${referralFieldCount}</span>
                <input type="text" name="indicacao_nome_${referralFieldCount}" placeholder="Nome">
                <input type="tel" name="indicacao_numero_${referralFieldCount}" placeholder="Número">
            `;
            container.appendChild(newRow);
            
            // Focus on the new name field
            newRow.querySelector('input[type="text"]').focus();
            newRow.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }

        function selectReferralOption(element, showFields) {
            document.querySelectorAll('.referral-option').forEach(opt => opt.classList.remove('selected'));
            element.classList.add('selected');
            element.querySelector('input').checked = true;

            const container = document.getElementById('referralFieldsContainer');
            if (container) {
                container.style.display = showFields ? 'block' : 'none';
            }

            // Auto-save on referral option selection
            saveFormProgress();
        }

        async function submitReferrals() {
            // Check if user opted out
            const optedOut = document.querySelector('input[name="participar_indicacoes"][value="nao"]')?.checked;
            if (optedOut) {
                skipReferrals();
                return;
            }
            
            // Validate 10 required fields if user chose "Sim"
            const requiredRows = document.querySelectorAll('.referral-input-row.required');
            let allValid = true;
            let firstInvalid = null;
            
            requiredRows.forEach(row => {
                const nomeInput = row.querySelector('input[type="text"]');
                const numeroInput = row.querySelector('input[type="tel"]');
                const nome = nomeInput?.value.trim() || '';
                const numero = numeroInput?.value.trim() || '';
                
                // Reset styles
                nomeInput.style.borderColor = '';
                numeroInput.style.borderColor = '';
                
                if (!nome || !numero) {
                    allValid = false;
                    if (!nome) nomeInput.style.borderColor = 'var(--error)';
                    if (!numero) numeroInput.style.borderColor = 'var(--error)';
                    if (!firstInvalid) firstInvalid = !nome ? nomeInput : numeroInput;
                }
            });
            
            if (!allValid) {
                firstInvalid?.focus();
                firstInvalid?.scrollIntoView({ behavior: 'smooth', block: 'center' });
                return;
            }
            
            // Collect all referrals (required + extras) - TODAS as indicações preenchidas
            const referrals = [];
            const allRows = document.querySelectorAll('.referral-input-row');

            console.log(`Total de linhas encontradas: ${allRows.length}`);

            allRows.forEach((row, index) => {
                const nomeInput = row.querySelector('input[type="text"]');
                const numeroInput = row.querySelector('input[type="tel"]');
                const nome = nomeInput?.value?.trim() || '';
                const numero = numeroInput?.value?.trim() || '';

                console.log(`Linha ${index + 1}: nome="${nome}", numero="${numero}"`);

                // Incluir QUALQUER linha que tenha pelo menos nome OU número preenchido
                if (nome.length > 0 || numero.length > 0) {
                    referrals.push({
                        nome: nome,
                        numero: numero,
                        index: row.dataset.index || (index + 1).toString()
                    });
                    console.log(`✓ Indicação ${index + 1} adicionada: ${nome} - ${numero}`);
                } else {
                    console.log(`✗ Indicação ${index + 1} pulada (vazia)`);
                }
            });

            console.log(`Total de indicações coletadas: ${referrals.length}`);

            const btn = document.querySelector('.form-step[data-step="9"] .btn-submit');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<span class="loading"></span> Enviando...';
            btn.disabled = true;

            try {
                // Use the stored client email from login
                const emailCliente = clientEmail ||
                                   document.getElementById('emailInput')?.value.trim() ||
                                   formData.email ||
                                   document.querySelector('input[name="email"]')?.value;

                const indicacoesFormatadas = referrals.map(ref => ({
                    nome: ref.nome,
                    numero: ref.numero
                }));

                const payloadFinal = {
                    email_cliente: emailCliente,
                    indicacoes: indicacoesFormatadas,
                    total_indicacoes: referrals.length,
                    timestamp: new Date().toISOString()
                };

                console.log('🚀 Enviando para webhook:', payloadFinal);
                console.log(`📊 Total de indicações enviadas: ${indicacoesFormatadas.length}`);

                await fetch('https://sdr.salesdever.io/webhook/indicacoes-onboarding', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payloadFinal)
                });

                console.log('✅ Indicações enviadas com sucesso!');
            } catch (error) {
                console.error('❌ Erro ao enviar indicações:', error);
                // Continue anyway - don't block the user flow
            }

            // Final celebration
            btn.innerHTML = originalText;
            btn.disabled = false;
            triggerEpicCelebration();
            setTimeout(() => {
                currentStep = 10;
                showStep(currentStep);
                // Clear saved progress - form completed successfully
                clearFormProgress(clientEmail);
            }, 2000);
        }

        function skipReferrals() {
            confetti.burst(window.innerWidth / 2, window.innerHeight / 2, 80);
            currentStep = 10;
            showStep(currentStep);
            // Clear saved progress - form completed successfully (skipped referrals)
            clearFormProgress(clientEmail);
        }

        // ========== AUTO-SAVE LOCALSTORAGE ==========
        let saveTimeout = null; // Para debounce

        function isLocalStorageAvailable() {
            try {
                const test = '__localStorage_test__';
                localStorage.setItem(test, test);
                localStorage.removeItem(test);
                return true;
            } catch (e) {
                return false;
            }
        }

        function getStorageKey(email) {
            return `onboarding_${email}`;
        }

        function saveFormProgress() {
            if (!isLocalStorageAvailable() || !clientEmail) return;

            // Debounce - evita salvar excessivamente
            if (saveTimeout) {
                clearTimeout(saveTimeout);
            }

            saveTimeout = setTimeout(() => {
                try {
                    // Coletar todos os dados do formulário
                    const responses = {};
                    const selectedOptions = {};

                    // Inputs: text, email, tel, number, password, textarea
                    document.querySelectorAll('input[name], textarea[name]').forEach(input => {
                        if (input.name) {
                            if (input.type === 'radio') {
                                if (input.checked) {
                                    responses[input.name] = input.value;
                                }
                            } else if (input.type === 'checkbox') {
                                if (!responses[input.name]) responses[input.name] = [];
                                if (input.checked) {
                                    responses[input.name].push(input.value);
                                }
                            } else if (input.type === 'file') {
                                // Apenas o nome do arquivo se existir
                                responses[input.name] = input.files.length > 0 ? input.files[0].name : '';
                            } else {
                                responses[input.name] = input.value;
                            }
                        }
                    });

                    // Opções selecionadas (.selected)
                    document.querySelectorAll('.option-item.selected, .checkbox-item.selected, .referral-option.selected').forEach((item, index) => {
                        const parent = item.closest('.option-group, .checkbox-grid, .referral-options');
                        if (parent) {
                            const parentId = parent.id || `group_${index}`;
                            selectedOptions[parentId] = selectedOptions[parentId] || [];

                            // Identificar a opção pelo input interno ou texto
                            const input = item.querySelector('input');
                            const identifier = input ? input.value : item.textContent.trim();
                            selectedOptions[parentId].push(identifier);
                        }
                    });

                    const progressData = {
                        email: clientEmail,
                        currentStep: currentStep,
                        lastUpdated: new Date().toISOString(),
                        responses: responses,
                        selectedOptions: selectedOptions
                    };

                    localStorage.setItem(getStorageKey(clientEmail), JSON.stringify(progressData));
                    console.log('Progresso salvo automaticamente');

                } catch (error) {
                    console.error('Erro ao salvar progresso:', error);
                }
            }, 500); // Debounce de 500ms
        }

        function loadFormProgress(email) {
            if (!isLocalStorageAvailable() || !email) return null;

            try {
                const data = localStorage.getItem(getStorageKey(email));
                return data ? JSON.parse(data) : null;
            } catch (error) {
                console.error('Erro ao carregar progresso:', error);
                return null;
            }
        }

        function restoreFormProgress(data) {
            if (!data) return;

            try {
                // Restaurar respostas dos inputs
                Object.keys(data.responses).forEach(fieldName => {
                    const elements = document.querySelectorAll(`[name="${fieldName}"]`);

                    elements.forEach(element => {
                        if (element.type === 'radio') {
                            element.checked = element.value === data.responses[fieldName];
                        } else if (element.type === 'checkbox') {
                            const values = data.responses[fieldName];
                            element.checked = Array.isArray(values) && values.includes(element.value);
                        } else if (element.type !== 'file') {
                            element.value = data.responses[fieldName];
                        }
                    });
                });

                // Restaurar opções selecionadas
                Object.keys(data.selectedOptions).forEach(groupId => {
                    const group = document.getElementById(groupId);
                    if (group) {
                        // Limpar seleções atuais
                        group.querySelectorAll('.selected').forEach(item => {
                            item.classList.remove('selected');
                        });

                        // Aplicar seleções salvas
                        data.selectedOptions[groupId].forEach(identifier => {
                            group.querySelectorAll('.option-item, .checkbox-item, .referral-option').forEach(item => {
                                const input = item.querySelector('input');
                                const itemId = input ? input.value : item.textContent.trim();

                                if (itemId === identifier) {
                                    item.classList.add('selected');
                                    if (input) input.checked = true;
                                }
                            });
                        });
                    }
                });

                // Ir para o step salvo
                currentStep = data.currentStep || 2; // Default para step 2 se não tiver
                showStep(currentStep);

                console.log('Progresso restaurado:', data);

            } catch (error) {
                console.error('Erro ao restaurar progresso:', error);
            }
        }

        function clearFormProgress(email) {
            if (!isLocalStorageAvailable() || !email) return;

            try {
                localStorage.removeItem(getStorageKey(email));
                console.log('Progresso limpo do LocalStorage');
            } catch (error) {
                console.error('Erro ao limpar progresso:', error);
            }
        }

        // ========== CONTADOR ANIMADO ==========
        function animateCounter() {
            const counterEl = document.getElementById('animatedCounter');
            if (!counterEl) return;

            const target = 200;
            const duration = 2500;
            const startTime = performance.now();

            function easeOutExpo(t) {
                return t === 1 ? 1 : 1 - Math.pow(2, -10 * t);
            }

            function updateCounter(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                const easedProgress = easeOutExpo(progress);
                const current = Math.floor(easedProgress * target);

                counterEl.textContent = current;

                if (progress < 1) {
                    requestAnimationFrame(updateCounter);
                } else {
                    counterEl.textContent = target;
                }
            }

            requestAnimationFrame(updateCounter);
        }

        // ========== MAGNETIC BUTTONS ==========
        document.querySelectorAll('.btn').forEach(btn => {
            btn.addEventListener('mousemove', (e) => {
                const rect = btn.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                btn.style.transform = `translate(${x * 0.15}px, ${y * 0.15}px)`;
            });
            btn.addEventListener('mouseleave', () => {
                btn.style.transform = '';
            });
        });

        // ========== KEYBOARD NAVIGATION ==========
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && e.target.tagName !== 'TEXTAREA') {
                const activeStep = document.querySelector('[data-step].active');
                const nextBtn = activeStep?.querySelector('.btn-submit, .btn-next');
                if (nextBtn && !nextBtn.disabled) nextBtn.click();
            }
        });

        // ========== INIT ==========
        showStep(1);
    </script>
</body>
</html>